To enable Custom Token Exchange, you need to create a Token Exchange Profile that links your Custom Token Exchange Action to a unique subject token type identifier.

<AccordionGroup>
  <Accordion title="1. Get a Management API Token from the Dashboard">
    To create a token exchange profile, you need a Management API access token with the appropriate scopes.

    The quickest way to get a token for testing is from the Auth0 Dashboard:

    1. Navigate to **Applications > APIs** in your Auth0 Dashboard
    2. Select **Auth0 Management API**
    3. Click on the **API Explorer** tab
    4. Copy the displayed token

    <Frame>
      <img
        src="/img/mcp/management_dashboard_api_token.png"
        alt="Management API Token in Dashboard"
      />
    </Frame>

    <Info>
    The token includes all the scopes granted to the API Explorer Application. For production environments, we recommend using the [Client Credentials flow](https://auth0.com/docs/get-started/authentication-and-authorization-flow/client-credentials-flow) to acquire tokens with only the necessary scopes.
    </Info>

    Save this token - you'll use it in step 3.
  </Accordion>

  <Accordion title="2. Get Your Action ID">
    You need the ID of the Custom Token Exchange Action you deployed earlier.

    Run the following command to list all actions in your tenant:

    ```shell
    auth0 actions list
    ```

    From the output, find the action that matches the name you used when creating your Custom Token Exchange Action. Copy the Action ID (it starts with `act_`).

    Example output:
    ```
    ID                          NAME                                     TYPE
    act_aBc123XyZ456            On-behalf-of token exchange             custom-token-exchange
    ```

    Save this Action ID - you'll use it in the next step.
  </Accordion>

  <Accordion title="3. Create the Token Exchange Profile">
    Now use the Management API to create your Custom Token Exchange Profile.

    Replace the placeholder values in the command below:
    - `YOUR_TENANT` - Your Auth0 tenant domain (e.g., `dev-abc123.us.auth0.com`)
    - `YOUR_MANAGEMENT_API_TOKEN` - The token from Step 1
    - `YOUR_PROFILE_NAME` - A descriptive name for your profile (e.g., `"MCP Custom Token Exchange"`)
    - `<your-action-id>` - The Action ID from Step 2

    ```shell wrap lines
    curl --location 'https://YOUR_TENANT/api/v2/token-exchange-profiles' \
    --header 'Content-Type: application/json' \
    --header 'Authorization: Bearer YOUR_MANAGEMENT_API_TOKEN' \
    --data '{
        "name": "YOUR_PROFILE_NAME",
        "subject_token_type": "urn:fastmcp:mcp",
        "action_id": "<your-action-id>",
        "type": "custom_authentication"
    }'
    ```

    <Info>
    The `subject_token_type` must be a unique URI identifier. In this example, we use `urn:fastmcp:mcp` which is specific to FastMCP implementations. You cannot use reserved namespaces like `urn:auth0`.
    </Info>

    A successful response will return the profile details including the profile ID and creation timestamp.

    For more information on managing token exchange profiles, see [Custom Token Exchange documentation](https://auth0.com/docs/authenticate/custom-token-exchange#manage-custom-token-exchange-profile).
  </Accordion>
</AccordionGroup>
