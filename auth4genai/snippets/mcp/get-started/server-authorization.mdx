import MCPGetStartedPrerequisites from "/snippets/mcp/get-started/pre-reqs/prerequisites.mdx";
import MCPGetStartedConfigTenantSettings from "/snippets/mcp/get-started/config-tenant/config-tenant-settings.mdx";
import CreateMCPAPI from "/snippets/mcp/get-started/create-mcp-api.mdx";
import AssignPermissionsToRoles from "/snippets/mcp/get-started/config-tenant/assign-permissions-to-roles.mdx";
import { DownloadQuickstartButton } from "/snippets/download-quickstart/DownloadQuickstartButton.jsx";

Authorization controls access to your MCP server so that only trusted clients can use its resources. In this quickstart, you'll learn how to secure your MCP server by requiring and validating client access tokens.

When an MCP client makes a request on behalf of a user, it must include a valid access token issued by Auth0. Your MCP server verifies this token and determines which tools and resources the client can access based on the user's permissions.

By the end of this quickstart, you will have an MCP server that:
* Requires access tokens for all incoming requests
* Validates OAuth 2.0 access tokens from authorized clients
* Enforces role-based access control to manage tool permissions

<MCPGetStartedPrerequisites />

<MCPGetStartedConfigTenantSettings />

## Create an API to represent your MCP server

<CreateMCPAPI />

<AssignPermissionsToRoles />

<Tabs>
  <Tab title="Use sample app (recommended)">
    Start by downloading the sample app for this quickstart. The sample includes a FastMCP MCP server with an Auth0 integration in JavaScript.

    <DownloadQuickstartButton
      category="auth-for-mcp"
      framework="fastmcp-mcp-js"
    />

    Once downloaded, extract the files and open the project in your preferred IDE.
</Tab>
  <Tab title="Clone GitHub repository">
    Clone the repository and navigate to the sample app folder which includes a FastMCP MCP server with an Auth0 integration in JavaScript.

    ```shell wrap lines
    git clone https://github.com/auth0-samples/auth0-ai-samples.git
    cd auth0-ai-samples/auth-for-mcp/fastmcp-mcp-js
    ```

    Once cloned, open the project in your preferred IDE.
  </Tab>
</Tabs>

## Install packages

Ensure you have npm installed or follow the instructions to [install npm](https://docs.npmjs.com/downloading-and-installing-node-js-and-npm) in its documentation. In the `fastmcp-mcp-js` directory, install the required packages:

```shell
npm install
```

## Create your environment file

In the `fastmcp-mcp-js` directory, create a new `.env` file and add the following content:

```shell
AUTH0_DOMAIN=<your-auth0-domain>
AUTH0_AUDIENCE=http://localhost:3001
PORT=3001
MCP_SERVER_URL=http://localhost:3001
```

To get your Auth0 applicationâ€™s `AUTH0_DOMAIN`, run the following command:

```shell
auth0 tenants list
```

Copy the domain under `TENANT` from the output and update the corresponding variable in the `.env` file.

## Run your MCP server

Run this command to start your server:

```shell
npm run start
```
