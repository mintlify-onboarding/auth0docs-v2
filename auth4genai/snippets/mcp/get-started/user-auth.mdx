import MCPGetStartedPrerequisites from "/snippets/mcp/get-started/pre-reqs/prerequisites.mdx";
import MCPGetStartedConfigTenantSettings from "/snippets/mcp/get-started/config-tenant/config-tenant-settings.mdx";
import { DownloadQuickstartButton } from "/snippets/download-quickstart/DownloadQuickstartButton.jsx";

Authentication is the process of proving a user’s identity before granting them access to a resource. In this quickstart, you’ll learn how to bring [Universal Login](https://auth0.com/docs/authenticate/login/auth0-universal-login) to your MCP-based applications and leverage OAuth 2.0 and OpenID Connect to securely authenticate users.

When a user authenticates with an identity provider through Auth0, Auth0 can pass user information to the MCP server in order to allow the user to access the appropriate tools and resources.

By the end of this quickstart, you should have an MCP server that can:

* Let users sign up and log in using a username and password or a Google account.
* Authenticate and authorize users using OAuth 2.0 and OpenID Connect.
* Let users use specific tools based on their roles.

<MCPGetStartedPrerequisites />

<MCPGetStartedConfigTenantSettings />

## Create an API to Represent Your MCP Server

The API (also known as a Resource Server) represents your protected MCP Server and sets it as the default for your tenant.

```shell wrap lines

auth0 api post resource-servers --data '{
  "identifier": "http://localhost:3001/",
  "name": "MCP Tools API",
  "signing_alg": "RS256",
  "token_dialect": "rfc9068_profile_authz",
  "enforce_policies": true,
  "scopes": [
    {"value": "tool:whoami", "description": "Access the WhoAmI tool"},
    {"value": "tool:greet", "description": "Access the Greeting tool"}
  ]
}'
```

Note that `rfc9068_profile_authz` is used as the [token dialect](https://auth0.com/docs/get-started/apis/enable-role-based-access-control-for-apis#token-dialect-options) to include the `permissions` claim in the access token, which can be useful for the API to check user permissions without making additional calls.

### Download sample app

Start by downloading the sample app for this quickstart. The sample includes a FastMCP MCP Server with Auth0 integration in JavaScript.

<DownloadQuickstartButton
  category="auth-for-mcp"
  framework="fastmcp-mcp-js"
/>

Once downloaded, extract the files and open the project in your preferred IDE.

<Expandable title="Or if you prefer to clone the repository...">

Clone the repository and navigate to the correct folder:

```shell wrap lines
git clone https://github.com/auth0-samples/auth0-ai-samples.git
cd auth0-ai-samples/auth-for-mcp/fastmcp-mcp-js
```
</Expandable>

## Install packages

Ensure you have npm installed or follow the instructions to [install npm](https://docs.npmjs.com/downloading-and-installing-node-js-and-npm) in its documentation. In the `fastmcp-mcp-js` directory, install the required packages:

```shell
npm install
```

## Create your environment file

In the `fastmcp-mcp-js` directory, create a new `.env` file and add the following content:

```shell
AUTH0_DOMAIN=<your-auth0-domain>
AUTH0_AUDIENCE=http://localhost:3001
PORT=3001
MCP_SERVER_URL=http://localhost:3001
```

To get your Auth0 application’s `AUTH0_DOMAIN`, run the following command:

```shell
auth0 tenants list
```

Copy the domain under `TENANT` from the output and update the corresponding variable on the `.env`.

## Run your application

Run this command to start your server:

```shell
npm run start
```
