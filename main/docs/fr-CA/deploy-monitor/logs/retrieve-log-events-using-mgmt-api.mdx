---
title: "Récupérer les événements de journal à l’aide de Management API"
permalink: "retrieve-log-events-using-mgmt-api"
'description': "Apprenez à récupérer les événements du journal en utilisant le point de terminaison get_logs de Management API Auth0, par point de contrôle ou par critère de recherche."
'og:title': "Récupérer les événements de journal à l’aide de Management API"
'og:description': "Apprenez à récupérer les événements du journal en utilisant le point de terminaison get_logs de Management API Auth0, par point de contrôle ou par critère de recherche."
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "Récupérer les événements de journal à l’aide de Management API"
'twitter:description': "Apprenez à récupérer les événements du journal en utilisant le point de terminaison get_logs de Management API Auth0, par point de contrôle ou par critère de recherche."
---

Vous pouvez utiliser <Tooltip href="/docs/fr-CA/glossary?term=management-api" tip="Management API
Un produit permettant aux clients d’effectuer des tâches administratives." cta="Voir le glossaire">Management API</Tooltip> pour récupérer jusqu’à 100 événements de journal par demande en utilisant le point de terminaison [/get_logs](https://auth0.com/docs/api/management/v2/#!/Logs/get_logs), qui prend en charge deux types de consommation :

* **Par point de contrôle** : Recommandé si vous souhaitez exporter les événements du journal vers un service externe d’analyse des données.
* **Par critère de recherche** : Utilisé par le Dashboard.

Les journaux stockés par Auth0 sont soumis à une période de rétention qui est basée sur votre abonnement Auth0. Pour en savoir plus, lisez [Rétention des données des journaux](/docs/fr-CA/deploy-monitor/logs/log-data-retention).

Vous pouvez également utiliser ces points de terminaison pour rechercher des journaux :

* `/api/v2/logs/{id}`: Récupère l’entrée de journal unique associée à l’identifiant de journal fourni.
* `/api/v2/users/{user_id}/logs`: Récupère les événements du journal pour un identifiant d’utilisateur spécifique.

## Récupérer les journaux par point de contrôle

Cette méthode vous permet de récupérer les événements plus récents qu’un `log_id` donné. Elle est couramment utilisée pour envoyer vos journaux à un système externe, tel que Splunk, Datadog, Application Insights, Mixpanel, entre autres.

Pour effectuer une recherche par point de contrôle, utilisez les paramètres suivants :

<table class="table"><thead>
<tr>
<th><strong>Paramètre</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>`from`</td>
<td>ID de l’événement de journal pour commencer à récupérer les journaux. Vous pouvez limiter la quantité de journaux en utilisant le paramètre `take`.</td>
</tr>
<tr>
<td>`take`</td>
<td>Le nombre total d’entrées à récupérer lors de l’utilisation du paramètre `from`.</td>
</tr>
</tbody>
</table>

Tout paramètre autre que `from` et `take` sera ignoré. Les journaux sont classés par `log_id`.

#### Sémantique

La récupération des journaux par point de contrôle possède la sémantique suivante :

* Tous les journaux disponibles pour les permissions de votre rôle seront retournés
* Les journaux sont classés par `log_id`, plutôt que par l’heure de génération de l’événement, afin d’éviter de sauter des enregistrements antérieurs en raison de délais du système Auth0.
* La pagination est illimitée, ce qui signifie qu’il n’y a pas de limite, contrairement à la limite de `1000` enregistrements lors de la récupération des journaux par critère de recherche.

#### Pagination

Lors de la récupération des journaux par point de contrôle, seule la première demande doit être effectuée manuellement. Chaque demande ultérieure doit être effectuée en utilisant la `prochaine` URL liée à l’intérieur de l’en-tête `Lien`. Cela simplifie le travail d’intégration avec l’API et permet à Auth0 d’effectuer des optimisations sans impacter l’expérience du client.

#### Exemple

Supposons que le nom de votre locataire dans `us` soit `acme`. Pour commencer à récupérer les enregistrements par point de contrôle :

1. Récupérez le `log_id` de n’importe quel journal de votre système.
   Exemple : `90020211201185132572079310688835925971249535794074878050`.
2. Faites une demande à `https://TENANT_NAME.LOCALITY.auth0.com/api/v2/logs?from=LOG_ID&take=100` pour demander les `100` prochains journaux plus récents que le `LOG_ID` donné.
3. La réponse HTTP contiendra

   1. Un tableau JSON de `0` à `100` journaux plus récents que l’identifiant `LOG_ID` donné.
   2. Un en-tête HTTP `Link` avec une relation `next`.
4. Si l’ensemble des résultats est vide, vous recevrez un tableau vide et la relation `next` correspondra à la même URL que celle que vous avez utilisée dans la demande la plus récente.

## Récupérer les journaux par critères de recherche

Cette méthode permet d’extraire les événements du journal qui correspondent aux critères de recherche spécifiés ou, si aucun critère n’est utilisé, de dresser la liste de tous les événements. Pour effectuer une recherche par critères, utilisez les paramètres suivants :

<table class="table"><thead>
<tr>
<th>Paramètre</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>`q`</td>
<td>Critères de recherche utilisant la syntaxe de chaîne de requête.</td>
</tr>
<tr>
<td>`page`</td>
<td>Le numéro de page basé sur zéro.</td>
</tr>
<tr>
<td>`per_page`</td>
<td>Le nombre d’entrées par page.</td>
</tr>
<tr>
<td>`sort`</td>
<td>Le champ à utiliser pour le tri. Utilisez `field:order`, où `order` est `1` pour croissant et `-1` pour décroissant. Par exemple `date:-1`.</td>
</tr>
<tr>
<td>`fields`</td>
<td>Une liste de champs séparés par des virgules à inclure ou à exclure (selon `include_fields`) du résultat. Laisser vide pour récupérer tous les champs.</td>
</tr>
<tr>
<td>`include_fields`</td>
<td>`true` si les champs spécifiés doivent être inclus dans le résultat, `false` autrement. Établit la valeur par défaut sur `true`.</td>
</tr>
</tbody>
</table>

Pour consulter la liste des champs et des paramètres de tri pouvant être utilisés dans la requête de recherche, lisez [Syntaxe de la requête de recherche de journaux](/docs/fr-CA/deploy-monitor/logs/log-search-query-syntax).

## Limites

Outre la limitation à 100 événements de journal par demande de récupération des journaux, vous ne pouvez paginer que jusqu’à 1000 résultats de recherche.

Si vous obtenez l’erreur `414 Request-URI Too Large`, cela signifie que votre chaîne de requête est plus longue que la longueur prise en charge. Dans ce cas, affinez votre recherche.

<Card title="Limitations du champ de recherche Nuage privé">

Il est possible d’effectuer une recherche dans le nuage privé uniquement pour les champs suivants :

* `user`
* `connection`
* `application`
* `type`
* `ip`

Utilisez des guillemets pour les recherches exactes (p. ex., `application:"test"` recherchera tous les événements de journal propres à l’application nommée `test`, mais `application:test` recherchera les événements de journal pour les applications contenant « test » dans leur nom.

</Card>

## En savoir plus

* [Codes de type d’événements de journal](/docs/fr-CA/deploy-monitor/logs/log-event-type-codes)
* [Syntaxe de demande de recherche journal](/docs/fr-CA/deploy-monitor/logs/log-search-query-syntax)
* [Conservation des données de journal](/docs/fr-CA/deploy-monitor/logs/log-data-retention)