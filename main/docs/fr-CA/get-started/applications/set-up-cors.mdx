---
title: "Configurer le partage des ressources cross-origin"
permalink: "set-up-cors"
'description': "Décrit comment configurer le partage de ressources cross-origin (CORS) pour une application enregistrée auprès d’Auth0 à l’aide d’Auth0 Dashboard."
'og:title': "Configurer le partage des ressources cross-origin"
'og:description': "Décrit comment configurer le partage de ressources cross-origin (CORS) pour une application enregistrée auprès d’Auth0 à l’aide d’Auth0 Dashboard."
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "Configurer le partage des ressources cross-origin"
'twitter:description': "Décrit comment configurer le partage de ressources cross-origin (CORS) pour une application enregistrée auprès d’Auth0 à l’aide d’Auth0 Dashboard."
---
import {AuthCodeBlock} from "/snippets/AuthCodeBlock.jsx";


<Card title="Avant de commencer">

* Pour des raisons de sécurité, l’URL d’origine de votre application doit faire partie de la liste des URL approuvées. Si vous ne l’avez pas déjà ajouté aux **URL de rappel autorisées** pour votre application, vous devrez l’ajouter à la liste **Allowed Origins (CORS) (Origines autorisées)**.
* Assurez-vous que **Origines Web autorisées** dans l’affichage des **Settings (Paramètres)**de votre application est définie sur le domaine effectuant la requête. Les URL peuvent contenir des caractères génériques pour les sous-domaines, mais pas de chemins relatifs après l’URL du domaine. Pour en savoir plus, lisez [Espaces réservés pour les sous-domaines](https://auth0.com/docs/get-started/applications/wildcards-for-subdomains).
* Si vous n’activez pas [Domaines personnalisés](https://auth0.com/docs/customize/custom-domains), vous devrez créer une page de vérification qui utilise Auth0.js comme solution de secours pour l’authentification interorigine.

</Card>

Auth0 recommande fortement que les transactions d’authentification soient gérées à partir de la [Connexion universelle](/docs/fr-CA/authenticate/login/auth0-universal-login). Il s’agit de la manière la plus simple et la plus sûre d’authentifier les utilisateurs. Cependant, certaines situations peuvent nécessiter que la connexion soit directement intégrée dans une application. Lorsqu’une connexion intégrée est requise, une application doit être configurée pour le partage de ressources cross-origin (CORS).

Vous pouvez configurer CORS pour une application à l’aide d’Auth0 Dashboard.

## Configurer l’authentification cross-origin

1. Rendez-vous à [Dashboard > Applications > Applications](https://manage.auth0.com/#/applications) et sélectionnez le nom de l’application que vous souhaitez afficher.
2. Sous **Authentification cross-origin**, activez le bouton bascule **Autoriser l’authentification cross-origin**.
3. Rendez-vous à **Origines autorisées (CORS)** et saisissez l‘URL d’origine de votre application. Pour en savoir plus sur les Origines, veuillez consulter [Origines sur Mozilla MDN Web Docs](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Origin).
4. Cliquez sur **Enregistrer les modifications**.

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Si vous n’avez pas besoin d’utiliser CORS pour votre application, assurez-vous que l’option **Permettre l’authentification cross-origin** est désactivée.

</Callout>

## Créer une page de vérification cross-origin

Dans certains cas, les témoins de tiers ne sont pas pris en charge. Certaines versions de navigateur ne prennent pas en charge les témoins de tiers et, si elles le font, elles peuvent être désactivées dans les paramètres de l’utilisateur.

Pour les [navigateurs pris en charge](#browser-testing-support), vous pouvez utiliser la méthode `crossOriginVerification` de la [trousse SDK Auth0.js](/docs/fr-CA/libraries/auth0js) dans votre application sur une page dédiée pour gérer les cas où les témoins de tiers sont désactivés.

Pour les navigateurs qui ne sont pas pris en charge, tels que Chrome, Opera et Safari, l’authentification cross-origin ne fonctionnera pas lorsque les témoins de tiers sont désactivés, sauf si vous active les [domaines personnalisés](/docs/fr-CA/customize/custom-domains).

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

La configuration de **Safari** est intitulée « Empêcher le suivi multidomaine » et utilise [Prévention intelligente du suivi](https://webkit.org/blog/7675/intelligent-tracking-prevention/). Malheureusement, cela empêche également les témoins tiers d’être utiles dans les scénarios d’authentification. Voici un exemple de l’impact sur le [renouvellement des jetons](https://auth0.com/docs/api-auth/token-renewal-in-safari).

</Callout>

1. Créez une page dans votre application qui instancie `WebAuth` depuis [Auth0.js](/docs/fr-CA/libraries/auth0js). Appelez immédiatement `crossOriginVerification`. Le titre de la page est à votre discrétion.

   

export const codeExample = `   <!-- callback-cross-auth.html -->

<head>
  <script src="https://cdn.auth0.com/js/auth0/9.11/auth0.min.js"></script>
  <script type="text/javascript">
    var auth0Client = new auth0.WebAuth({
      clientID: '{yourClientId}',
      domain: '{yourDomain}'
    });
    auth0Client.crossOriginVerification();
  </script>
</head>
`;

<AuthCodeBlock children={codeExample} language="text" lines />

   Lorsque les témoins de tiers ne sont pas pris en charge, Auth0.js génère un iframe pour appeler un flux de vérification cross-origin différent.
2. Rendez-vous à [Dashboard > Applications > Applications](https://manage.auth0.com/#/applications), et sélectionnez le nom de l’application que vous souhaitez afficher.
3. Sous **Authentification cross-origin**, ajoutez la page de rappel que vous avez créée au champ **URL Vérification cross-origin de secours**.

   <Warning>

   Pour les environnements de production, vérifiez que l’URL de la page ne pointe pas vers `localhost`. La page doit se trouver dans le même domaine que celui où est hébergé le formulaire de connexion intégré et doit comporter un schéma `https`.

   </Warning>

4. Cliquez sur **Enregistrer les modifications**.

Pour plus de détails, veuillez consulter [Exemple d’authentification cross-origin sur GitHub](https://github.com/auth0/lock/blob/master/support/callback-cross-auth.html).

## Codes d’erreur et descriptions

<Warning>

Les descriptions d’erreurs sont destinées à être lues par un être humain. Elles sont sujettes à modification à tout moment et ne doivent être analysées par aucun code.

</Warning>

Lorsqu’Auth0.js v9 (et Lock) est utilisé pour une connexion intégrée, il appelle le point de terminaison `/co/authenticate`, qui comporte les erreurs suivantes :

<table class="table"><thead>
<tr>
<th><strong>État</strong></th>
<th><strong>Code</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>`400`</td>
<td>`invalid_request`</td>
<td>Corps de requête non valide. Tous les paramètres uniquement du type client_id, credential_type, username, OTP et realm sont requis.</td>
</tr>
<tr>
<td>`400`</td>
<td>`unsupported_credential_type`</td>
<td>Paramètre de type d’identifiant inconnu.</td>
</tr>
<tr>
<td>`400`</td>
<td>`invalid_request`</td>
<td>Domaine inconnu, connexion-inexistante.</td>
</tr>
<tr>
<td>`401`</td>
<td>`unauthorized_client`</td>
<td>Connexion d’origine croisée non autorisée.</td>
</tr>
<tr>
<td>`401`</td>
<td>`password_leaked`</td>
<td>Cette tentative de connexion a été bloquée car le mot de passe que vous utilisez a été précédemment divulgué suite à une violation de données (pas dans cette application).</td>
</tr>
<tr>
<td>`403`</td>
<td>`access_denied`</td>
<td>Courriel ou mot de passe incorrect.</td>
</tr>
<tr>
<td>`403`</td>
<td>`access_denied`</td>
<td>Erreur d’authentification</td>
</tr>
<tr>
<td>`403`</td>
<td>`blocked_user`</td>
<td>Utilisateur bloqué</td>
</tr>
<tr>
<td>`429`</td>
<td>`too_many_attempts`</td>
<td>Votre compte a été bloqué après plusieurs tentatives de connexion consécutives. Nous vous avons envoyé une notification par votre méthode de contact préférée avec des instructions sur la façon de le débloquer.</td>
</tr>
<tr>
<td>`429`</td>
<td>`too_many_attempts`</td>
<td>Nous avons détecté un comportement de connexion suspect et les prochaines tentatives seront bloquées. Veuillez communiquer avec l’administrateur.</td>
</tr>
</tbody>
</table>

De plus, vous pouvez également obtenir un code d’erreur `403` générique sans propriété `error` ou `error_description` Le corps de la réponse n’incluerait que quelque chose de similaire à ce qui suit :

`Origine https://test.app non permise.`

## Prise en charge des tests de navigateur

Les navigateurs suivants peuvent utiliser l’authentification cross-origin lorsque les témoins de tiers sont désactivés :

* Microsoft Internet Explorer

<Card title="Attributs des témoins samesite">

Précédemment, les options des [attributs de témoins](https://auth0.com/docs/sessions/concepts/cookie-attributes)[`samesite`](https://auth0.com/docs/sessions/concepts/cookie-attributes)étaient `true`, `false`, `strict` ou `lax`. Si vous n’aviez pas défini l’attribut manuellement, Auth0 utilisait la valeur par défaut `false`.

Depuis en février 2020, Google Chrome v80 a modifié la manière de gérer les témoins, et Auth0 a implémenté les modifications suivantes :

* La valeur des témoins dont l’attribut `samesite` n’a pas été défini sera `lax`.
* Les témoins `sameSite=none` doivent être sécurisés, sinon ils ne peuvent pas être enregistrés dans le groupe de témoins du navigateur.

L’objectif de ces modifications est d’améliorer la sécurité et d’éviter les attaques CSRF.

</Card>

## En savoir plus

* [Connexion intégrée](/docs/fr-CA/authenticate/login/embedded-login)
* [Authentification inter-origine](/docs/fr-CA/authenticate/login/cross-origin-authentication)
* [Paramètres d’application](/docs/fr-CA/get-started/applications/application-settings)
* [Modifications des attributs du témoin SameSite](/docs/fr-CA/manage-users/cookies/samesite-cookie-attribute-changes)