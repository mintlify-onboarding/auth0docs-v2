---
title: "Effectuer la migration vers les requêtes paginées des points de terminaison de Management API v2"
permalink: "migrate-to-paginated-queries"
'description': "Décrit comment utiliser les paramètres de pagination pour des requêtes de point de terminaison spécifiques de Management API v2."
'og:title': "Effectuer la migration vers les requêtes paginées des points de terminaison de Management API v2"
'og:description': "Décrit comment utiliser les paramètres de pagination pour des requêtes de point de terminaison spécifiques de Management API v2."
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "Effectuer la migration vers les requêtes paginées des points de terminaison de Management API v2"
'twitter:description': "Décrit comment utiliser les paramètres de pagination pour des requêtes de point de terminaison spécifiques de Management API v2."
---

Après le **26 janvier 2021** (ou Private Cloud version 2202), les requêtes adressées aux points de terminaison de <Tooltip href="/docs/fr-CA/glossary?term=management-api" tip="Management API
Un produit permettant aux clients d’effectuer des tâches administratives." cta="Voir le glossaire">Management API</Tooltip> v2 renverront un maximum de 50 éléments pour les locataires du Cloud public. Pour récupérer plus d’éléments, vous devez inclure les paramètres `page` et `per_page` . À partir du **21 juillet 2020** (ou Private Cloud version 2108), Auth0 affichera les journaux des locataires et une bascule de migration pour vous aider à vous préparer à ce changement.

Les locataires concernés sont ceux qui répondent aux critères suivants :

* Locataires de nuage public créés **avant le 21 juillet 2020** ou déploiements de nuage privé sur la version 2108
* Effectuer activement des appels vers les points de terminaison concernés sans transmettre le paramètre `per_page` pour les requêtes pouvant renvoyer plus d’un résultat.

Les locataires suivants adopteront par défaut le nouveau comportement de pagination et continueront à fonctionner comme ils le font aujourd’hui après le 26 janvier 2021 :

* Locataires de nuage public créés **à compter du 21 juillet 2020** ou déploiements de nuage privé sur la version 2108 ou supérieure
* N’utiliser aucun des points de terminaison concernés
* Utiliser les points de terminaison concernés et transmettre le paramètre `per_page`, ou effectuer des requêtes qui renverront toujours un seul résultat.

## Points de terminaison concernés

Les appels aux points de terminaison de Management API v2 suivants sont affectés :

* [`GET /api/v2/clients`](https://auth0.com/docs/api/management/v2#!/Clients/get_clients)
* [`GET /api/v2/client_grants`](https://auth0.com/docs/api/management/v2#!/Clients/client_grants)
* [`GET /api/v2/grants`](https://auth0.com/docs/api/management/v2#!/Clients/grants)
* [`GET /api/v2/connections`](https://auth0.com/docs/api/management/v2#!/Clients/connections)
* [`GET /api/v2/device-credentials`](https://auth0.com/docs/api/management/v2#!/Clients/device_credentials)
* [`GET /api/v2/resource-servers`](https://auth0.com/docs/api/management/v2#!/Clients/resource_servers)
* [`GET /api/v2/rules`](https://auth0.com/docs/api/management/v2#!/Clients/rules)

Les avis de dépréciation seront enregistrés dans vos journaux de locataires pour toutes les demandes sans options de pagination qui renvoient actuellement plus d’un élément, une fois par heure, pour chaque client et point de terminaison différent.

## Actions

1. Remplacez tous les appels vers les points de terminaison concernés en fournissant les paramètres `page` et `per_page` .

<table class="table"><thead>
<tr>
<th>Paramètre</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>`page`</td>
<td>Entier</td>
<td>Index de la page des résultats à renvoyer. La première page est 0.</td>
</tr>
<tr>
<td>`per_page`</td>
<td>Entier</td>
<td>Nombre de résultats par page. La pagination est désactivée si le paramètre n’est pas envoyé.</td>
</tr>
</tbody>
</table>
2. Confirmez que vous ne voyez plus les avis de dépréciation dans vos journaux de locataires. Vérifiez si une demande a renvoyé plus de 50 éléments. Regardez le champ `details.size_exceeded` et vérifiez si c’est `vrai`.

   1. Utilisez la requête de journal suivante pour renvoyer tous les appels sans options de pagination avec plus d’un résultat :
      `type:depnote AND description:*Unpaginated*`
   2. Utilisez la requête de journal suivante pour renvoyer tous les appels sans options de pagination avec plus de 50 résultats :
      `type:depnote AND description:*Unpaginated* AND details.size_exceeded:true`

   Pour identifier l’application effectuant la demande, les journaux incluront le `client_id` utilisé pour effectuer la Vous pouvez également trouver le point de terminaison utilisé dans le champ logs `details.path` .
3. Désactivez les requêtes non paginées de Management API pour votre locataire. Accédez à [Dashboard > Paramètres du locataire > Avancés > Migration](https://manage.auth0.com/#/tenant/advanced). Cela simulera le comportement attendu après la fermeture de la fenêtre de migration, ce qui permettra aux appels vers les points de terminaison concernés de renvoyer jusqu’à 50 résultats. Vous pourrez réactiver les demandes non paginées à tout moment avant cette date.

### Mettre à jour les extensions

Vous devrez peut-être mettre à jour les versions précédentes des [extensions Auth0](/docs/fr-CA/customize/extensions) et des extensions personnalisées vers les dernières versions pour vous assurer qu’elles effectuent uniquement des requêtes paginées.

1. Vérifiez les journaux de vos locataires pour les avis de dépréciation pour les clients dont l’ID correspond à une URL d’extensionURL. Cela signifie que vous devrez mettre à jour cette extension.
2. Accédez à [Dashboard > Extensions](https://manage.auth0.com/#/extensions), sélectionnez **Installed Extensions (Extensions installées)** et cliquez sur le lien **Update (Mettre à jour)** de l’extension s’il est présent.

### Mettre à jour l’outil Deploy CLI

Si vous utilisez l’outil `auth0-deploy-cli` , vous devez mettre à jour vers la version **5.3.0 ou ultérieure**. Pour en savoir plus, consultez [Déployer l’outil Deploy CLI](/docs/fr-CA/deploy-monitor/deploy-cli-tool).