---
title: "柔軟な識別子の属性を有効にして構成する"
permalink: "activate-and-configure-attributes-for-flexible-identifiers"
'description': "メールアドレスや電話番号のような識別子をユーザーテナントで構成する方法をご説明します。"
'og:title': "柔軟な識別子の属性を有効にして構成する"
'og:description': "メールアドレスや電話番号のような識別子をユーザーテナントで構成する方法をご説明します。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "柔軟な識別子の属性を有効にして構成する"
'twitter:description': "メールアドレスや電話番号のような識別子をユーザーテナントで構成する方法をご説明します。"
---

<Warning>

テナントでFlexible Identifiersを有効にすると、運用環境に重大な変更が生じる可能性があります。起こり得る問題と制限の詳細については、「[Flexible Identifiersと属性](/docs/ja-jp/authenticate/database-connections/flexible-identifiers-and-attributes)」を参照してください。

</Warning>

## 属性の構成を有効にする

1. [**［Auth0 Dashboard（Auth0ダッシュボード）］>［Authentication（認証）］>［Database（データベース）］** ](https://manage.auth0.com/#/connections/database)に移動して、**［Database Connections（データベース接続）］** の一覧から有効にしたいデータベース接続を選択します。
2. **［Attributes（属性）］** タブに移動し、** ［New Attributes Configuration（新しい属性の構成）］** 画面で **［Activate（有効化）］** を選択します。そして、開発環境で構成をテストしたことを確認します。
3. **［Proceed（進む）］** を選択します。新しい構成オプションが使えるようになります。

### 新しい接続の属性を選択します。

属性を接続に追加するには、[**［Auth0 Dashboard（Auth0ダッシュボード）］>［Authentication（認証）］>［Database（データベース）］** ](/docs/ja-jp/%24manage_url/database)に移動して行います。

新しい接続を作成するには、**［+ Create DB Connection（DB接続の作成）］** を選択して、追加する属性を選びます。既存の接続で使用中の属性を追加、構成、もしくは削除するには、既存の接続を構成し、** ［Attributes（属性）］** タブを選択して、下の説明に従ってください。

デフォルト値が新しい接続に割り当てられ、接続を作成し終わると編集できるようになります。

<table class="table"><thead>
<tr>
<th>設定</th>
<th>値</th>
</tr>
</thead>
<tbody>
<tr>
<td>Use `{attribute}`as Identifier（`{attribute}`を識別子に使用）</td>
<td>`True`</td>
</tr>
<tr>
<td>Allow Signup with`{attribute}`（`{attribute}`でのサインアップを許可）</td>
<td>必須</td>
</tr>
<tr>
<td>Require`{attribute}` on user profile（ユーザープロファイルで`{attribute}`を必須にする）</td>
<td>`True`</td>
</tr>
<tr>
<td>Username Length（ユーザー名の長さ）</td>
<td>最小：1文字 最大：15文字</td>
</tr>
<tr>
<td>Allow usernames in email format（メール形式のユーザー名を許可）</td>
<td>`False`</td>
</tr>
<tr>
<td>Allow usernames in phone number format（電話番号形式のユーザー名を許可）</td>
<td>`False`</td>
</tr>
</tbody>
</table>

### 既存の接続に属性を追加する

**［Attributes（属性）］** タブに移動し、** ［Activate（有効化する）］** を選択します。次に、利用可能な属性から選んで、**［Create（作成）］** オプションを選択します。

accordion.expand_all/accordion.collapse_all

<Accordion title="メール メールIDで利用可能な属性と構成オプション">

<table class="table"><thead>
<tr>
<th>オプション</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Use Email as Identifier（メールを識別子として使用する）</td>
<td>有効にすると、この接続でメールが識別子として使用されます。ユーザーはメールを使ってログインやパスワードのリセットを行うことができます。</td>
</tr>
<tr>
<td>Verification method（検証方法）</td>
<td>ユーザーの検証に従来型のメール検証とワンタイムパスワード（OTP）のどちらを使用するのか選択します。OTPはIdentifier First認証プロファイルを使用するテナントにのみ選択できます。<br/><ul><li>メール確認リンク：ユーザーのアカウント作成後にメール確認リンクが送信され、ユーザーは都合の良いときに処理できます。</li><li>OTP：ユーザーのアカウント作成中にOTPがメールで送信され、OTPとそれが関連付けられているメールが正常に検証された場合にのみアカウントが作成されます。</li></ul></td>
</tr>
<tr>
<td>Allow Signup with Email（メールでのサインアップを許可する）</td>
<td>サインアップ時にメールを収集する方法を選択します。<br/><ul><li>off（オフ）：属性がサインアップフローからブロックされます。</li><li>optional（任意）：属性はサインアップフローで任意です。</li><li>required（必須）：属性が存在しないと、サインアップフローが失敗します。</li></ul><br/>サインアップフローには以下が含まれます。<br/><ul><li>新しいユニバーサルログイン</li><li>Authentication APIのdbconnections/signupエンドポイント</li></ul></td>
</tr>
<tr>
<td>Verify email on sign up（サインアップ時にメールを検証する）</td>
<td>ユーザーのサインアップ時にマジックリンクを通してメールを確認することが求められます。</td>
</tr>
<tr>
<td>Require email on user profile（ユーザープロファイルでメールを必須にする）</td>
<td>接続でユーザープロファイルの作成や更新を行うすべての操作について、メールが必須になります。<br/>以下ではメールが要求されます。<br/><ul><li>サインアップフロー</li><li>Management APIを通したユーザーの作成や更新</li> <li>ユーザーの一括インポート</li></ul></td>
</tr>
</tbody>
</table>

</Accordion>

<Accordion title="電話 電話IDで利用可能な属性と構成オプション">

<table class="table"><thead>
<tr>
<th>オプション</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Use Phone as Identifier（電話を識別子として使用する）</td>
<td>有効にすると、この接続で電話番号が識別子として使用されます。ユーザーは、電話番号を使ってログインやパスワードのリセットを行うことができます。</td>
</tr>
<tr>
<td>Allow Signup with Phone（電話でのサインアップを許可する）</td>
<td>サインアップ時の電話番号の収集を選択します。<br/><ul><li>off（オフ）：属性がサインアップフローからブロックされます。</li><li>optional（任意）：属性がサインアップフローで任意になります。</li><li>required（必須）：属性がないと、サインアップフローが失敗します。</li></ul><br/>サインアップフローには以下が含まれます：<br/><ul><li>新しいユニバーサルログイン</li><li>Authentication APIのデータベース接続またはサインアップエンドポイント</li></ul></td>
</tr>
<tr>
<td>Verify phone on signup（サインアップ時に電話を検証する）</td>
<td>ユーザーには、サインアップ時にOTPを使った電話番号の確認が求められます。<br/>電話プロバイダーは必ず構成してください。そうしないと、ユーザーがサインアップ処理を続行できなくなります。</td>
</tr>
<tr>
<td>Require phone on user profile（ユーザープロファイルで電話必須にする）</td>
<td>この接続でユーザープロファイルの作成や更新を行うすべての処理に、電話が要求されます。<br/>以下では電話が必須になります。<ul><li>サインアップフロー</li><li>Management APIを使用したユーザーの作成や更新</li> <li>一括ユーザーインポート</li></ul></td>
</tr>
</tbody>
</table>

</Accordion>

<Accordion title="ユーザー名 ユーザー名IDで利用可能な属性と構成オプション">

<table class="table"><thead>
<tr>
<th>オプション</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>Use Username as Identifier（ユーザー名を識別子として使用する）</td>
<td>これをオンにすると、ユーザー名がこの接続の識別子になります。ユーザーはログインとパスワードリセットにユーザー名を使用できるようになります。</td>
</tr>
<tr>
<td>Allow Signup with Username（ユーザー名でのサインアップを許可する）</td>
<td>サインアップ時にユーザー名を収集する方法を選択します<br/><ul><li>off（オフ）：属性がサインアップフローからブロックされます。</li><li>optional（任意）：属性がサインアップフローで任意になります。</li><li>required（必須）：属性がないとサインアップフローが失敗します。</li></ul><br/>サインアップフローには以下が含まれます：<br/><ul><li>新しいユニバーサルログイン</li><li>Authentication APIのデータベース接続/サインアップエンドポイント</li></ul></td>
</tr>
<tr>
<td>Require username on user profile（ユーザープロファイルでユーザー名を必須にする）</td>
<td>この接続でユーザープロファイルを作成または更新するすべての操作でユーザー名が要求されます。<br/>以下でユーザー名が要求されます：<br/><ul><li>サインアップフロー</li><li>Management APIを介したユーザーの作成または更新</li> <li>一括ユーザーインポート</li></ul></td>
</tr>
<tr>
<td>Username Length（ユーザー名の長さ）</td>
<td>ユーザーが設定できるユーザー名の最小値と最大値を定めます。</td>
</tr>
</tbody>
</table>

</Accordion>

### 接続にある既存の属性を構成または削除する

すべての属性は、<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-0" href="/docs/ja-jp/glossary?term=auth0-dashboard" tip="Auth0 Dashboard: サービスを構成するためのAuth0の主製品。" cta="用語集の表示">Auth0 Dashboard</Tooltip>で変更および削除できます。ユーザーは、削除された属性を使ってログイン、サインアップ、またはパスワードのリセットを行うことはできず、すべての接続で少なくとも1つの属性がアクティブのままでなければなりません。

属性を変更または削除するには、［Attributes（属性）］タブに移動してから、属性の横にある**［...］** メニューボタンを選び、ドロップダウンメニューの **［Configure（構成）］** または **［Remove（削除）］** を選択します。

### 接続を元に戻す

接続を元の状態に戻すには、 `attributes` パラメーターを含まない​ `options` オブジェクトを<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-0" href="/docs/ja-jp/glossary?term=management-api" tip="Management API: 顧客が管理タスクを実行できるようにするための製品。" cta="用語集の表示">Management API</Tooltip>の [接続更新](https://auth0.com/docs/api/management/v2/connections/patch-connections-by-id) エンドポイントに使用します。

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

* `オプション`パラメーターを使用すると、全体の`オプション`オブジェクトが上書きされます。部分的なデータやその他の問題を避けるために、接続の `オプション`オブジェクト内の内容をコピーして、現在のパラメータがすべて含まれるようにして、それをPATCH呼び出しに含めてください。削除すべき唯一のパラメーターは`属性`です。
* テナントで属性として`ユーザー名`が有効になっている場合、以下の操作を実行するには`ユーザー名`の設定を変更する必要があります。この方法を選択した場合、ユーザー名の設定を再構成する必要があります。

</Callout>

```javascript lines
{
"options": {
       }
}
```

