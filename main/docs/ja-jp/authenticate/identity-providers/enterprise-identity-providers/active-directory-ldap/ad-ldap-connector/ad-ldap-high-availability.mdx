---
title: "高可用性環境のAD/LDAPコネクターをデプロイする"
permalink: "ad-ldap-high-availability"
'description': "複数のコネクターインスタンスをインストールし、高可用性を確保する方法について説明します。"
'og:title': "高可用性環境のAD/LDAPコネクターをデプロイする"
'og:description': "複数のコネクターインスタンスをインストールし、高可用性を確保する方法について説明します。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "高可用性環境のAD/LDAPコネクターをデプロイする"
'twitter:description': "複数のコネクターインスタンスをインストールし、高可用性を確保する方法について説明します。"
---

複数のAD/LDAPコネクターインスタンスをデプロイし、AD/LDAP接続向けの高可用性環境を実現することができます。

## 概要

複数のAD/LDAPコネクターインスタンスをデプロイするには、以下が必要です。

1. プライマリサーバーにAD/LDAPコネクタをインストールします。
2. 初期インストールの構成ファイルをコピーまたはエクスポートします。
3. 追加サーバーにAD/LDAPコネクタをインストールします。
4. 構成ファイルを初期インストールから追加コネクターにインポートします。

## プライマリサーバーを構成する

1. AD/LDAPコネクターを最初のサーバーにインストールして構成します。
2. トラブルシューティング画面（[http://localhost:8357/#troubleshoot](http://localhost:8357/#troubleshoot)）を開き、トラブルシューティングテストを実行します。テストがすべて成功することを確認します。

   <table class="table"><thead>
   <tr>
   <th>テスト</th>
   <th>説明</th>
   <th>トラブルシューティング</th>
   </tr>
   </thead>
   <tbody>
   <tr>
   <td>テスト1</td>
   <td>LDAPサーバーおよび指定されているポートへのTCP接続確立を試行。</td>
   <td>基本的なネットワーク接続と、接続を妨害している可能性があるファイアウォールの設定を確認します。</td>
   </tr>
   <tr>
   <td>テスト2</td>
   <td>提供されたユーザー名とパスワードを使用してLDAPサーバーおよび指定されているポートのLDAPバインドを試行。</td>
   <td>LDAP接続文字列、検索パス、ユーザー名、パスワードを確認します。</td>
   </tr>
   <tr>
   <td>テスト3</td>
   <td>指定されたユーザー名の権限を確認するために、ディレクトリに対してLDAP検索を試行。</td>
   <td>対象ディレクトリのユーザー名の権限を確認します。</td>
   </tr>
   <tr>
   <td>テスト4</td>
   <td>Auth0サーバーへの接続確立を試行。</td>
   <td>ネットワーク接続と、接続を妨害している可能性があるファイアウォールの設定を確認します。</td>
   </tr>
   </tbody>
   </table>
3. 構成ファイルをコピーまたはエクスポートします。

## 追加サーバーを構成する

1. AD/LDAPコネクターを追加サーバーにインストールします（構成は行わない）。
2. プライマリサーバーから構成ファイルをインポートします。
3. 新しいサーバーでAuth0 AD/LDAPとAuth0 AD/LDAP Admin Windows Servicesを再起動します。
4. トラブルシューティング画面（[http://localhost:8357/#troubleshoot](http://localhost:8357/#troubleshoot)）を開き、トラブルシューティングテストを実行します。テストがすべて成功することを確認します。

詳細については、「[AD/LDAPコネクターをインストールして構成する](/docs/ja-jp/authenticate/identity-providers/enterprise-identity-providers/active-directory-ldap/ad-ldap-connector/install-configure-ad-ldap-connector)」と「[AD/LDAPコネクター構成をインポート/エクスポートする](/docs/ja-jp/authenticate/identity-providers/enterprise-identity-providers/active-directory-ldap/ad-ldap-connector/import-export-ad-ldap-connector-configs)」をお読みください。

## 接続を確認する

<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-0" href="/docs/ja-jp/glossary?term=auth0-dashboard" tip="Auth0 Dashboard: サービスを構成するためのAuth0の主製品。" cta="用語集の表示">Auth0 Dashboard</Tooltip>で、[［Authentication（認証）］>［Enterprise（エンタープライズ）］>［Active Directory / LDAP］](https://manage.auth0.com/#/connections/enterprise/ad)の順に進み、接続がアクティブであることを確認します。

接続をオンラインにできない場合は、「[AD/LDAPコネクターをトラブルシューティングする](/docs/ja-jp/troubleshoot/integration-extensibility-issues/troubleshoot-ad-ldap-connector)」をお読みください。

## Kerberosまたはクライアント証明書の使用

Kerberosまたはクライアント証明書を有効にし、AD/LDAP接続で認証を行う場合、ユーザーはAuth0サーバーを介さずに、AD/LDAPコネクターに直接問い合わせます。

複数のコネクターで高可用性構成を使用する場合は、ネットワークロードバランサーでフロントエンドとして使用されることをお勧めします。

1. `SERVER_URL`パラメーターを使用し、AD/LDAPコネクターが受信要求をリッスンする公共の場所を公開します。
2. ネットワークロードバランサーの`SERVER_URL`をデプロイされたAD/LDAPコネクターのすべての内部インスタンスにマッピングします。特別は配布ポリシーは必要ありません（たとえば、スティッキーセッションを使用しない均一なラウンドロビンは機能します）。

詳細については、「[KerberosでAD/LDAPコネクターの認証を構成する](/docs/ja-jp/authenticate/identity-providers/enterprise-identity-providers/active-directory-ldap/ad-ldap-connector/configure-ad-ldap-connector-with-kerberos)」または「[クライアント証明書を使ってAD/LDAPコネクターの認証を構成する](/docs/ja-jp/authenticate/identity-providers/enterprise-identity-providers/active-directory-ldap/ad-ldap-connector/configure-ad-ldap-connector-client-certificates)」をお読みください。

## もっと詳しく

* [AD/LDAPコネクターのインストールと構成](/docs/ja-jp/authenticate/identity-providers/enterprise-identity-providers/active-directory-ldap/ad-ldap-connector/install-configure-ad-ldap-connector)
* [AD/LDAPコネクター構成のインポートとエクスポ―ト](/docs/ja-jp/authenticate/identity-providers/enterprise-identity-providers/active-directory-ldap/ad-ldap-connector/import-export-ad-ldap-connector-configs)
* [クライアント証明書を使ってAD/LDAPコネクターの認証を構成する](/docs/ja-jp/authenticate/identity-providers/enterprise-identity-providers/active-directory-ldap/ad-ldap-connector/configure-ad-ldap-connector-client-certificates)
* [KerberosでAD/LDAPコネクターの認証を構成する](/docs/ja-jp/authenticate/identity-providers/enterprise-identity-providers/active-directory-ldap/ad-ldap-connector/configure-ad-ldap-connector-with-kerberos)
* [AD/LDAPコネクターがAuth0接続を指すようにする](/docs/ja-jp/authenticate/identity-providers/enterprise-identity-providers/active-directory-ldap/ad-ldap-connector/ad-ldap-connector-to-auth0)
* [AD/LDAPコネクターを更新する](/docs/ja-jp/authenticate/identity-providers/enterprise-identity-providers/active-directory-ldap/ad-ldap-connector/update-ad-ldap-connectors)