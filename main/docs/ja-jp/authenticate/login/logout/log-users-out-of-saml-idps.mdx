---
title: "ユーザーをSAML IDプロバイダーからログアウトする"
permalink: "log-users-out-of-saml-idps"
'description': "ユーザーを外部のSAML IDプロバイダーからログアウトする方法について説明します。"
'og:title': "ユーザーをSAML IDプロバイダーからログアウトする"
'og:description': "ユーザーを外部のSAML IDプロバイダーからログアウトする方法について説明します。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "ユーザーをSAML IDプロバイダーからログアウトする"
'twitter:description': "ユーザーを外部のSAML IDプロバイダーからログアウトする方法について説明します。"
---

シングルログアウト（SLO）とは、ユーザーが1回のログアウト操作で複数の認証セッションを終了できる機能のことです。

Auth0では、[アプリケーションをSAML IDプロバイダー（IdP）に接続する](/docs/ja-jp/authenticate/identity-providers/enterprise-identity-providers/saml)ときはSLOが、[Auth0をSAML IdPとして構成する](/docs/ja-jp/authenticate/single-sign-on/outbound-single-sign-on/configure-auth0-saml-identity-provider)ときは制限付きのSLOがそれぞれサポートされます。

## アプリケーションがSAML IdPに接続されているときにSLOを構成する

Auth0で[ユーザーをIDプロバイダーからログアウトする](/docs/ja-jp/authenticate/login/logout/log-users-out-of-idps)場合は、[Auth0 Authentication APIのログアウトエンドポイント](https://auth0.com/docs/api/authentication#logout)を呼び出すときに`federated`パラメーターを含めます。

Auth0が<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-1" href="/docs/ja-jp/glossary?term=security-assertion-markup-language" tip="Security Assertion Markup Language（SAML）: パスワードなしに二者間で認証情報を交換できる標準化プロトコル。" cta="用語集の表示">SAML</Tooltip> <Tooltip data-tooltip-id="react-containers-DefinitionTooltip-2" href="/docs/ja-jp/glossary?term=idp" tip="IDプロバイダー（IdP）: デジタルIDを保存および管理するサービス。" cta="用語集の表示">IdP</Tooltip>のログアウトエンドポイントにログアウト要求を送信するためには、SAML接続に追加の設定を構成しなければならない場合があります。

1. [［Auth0 Dashboard］>［Authentication（認証）］>［Enterprise（エンタープライズ）］>［SAML］](https://manage.auth0.com/#/connections/enterprise/samlp)の順に進み、接続を選択します。
2. **［Enable Sign Out（サインアウトを有効にする）］** トグルをオンにします。
3. SAML Idpで提供されたSAMLログアウトURLを **［Sign Out URL（サインアウトURL）］** フィールドに入力します。このフィールドを空白のままにすると、Auth0ではデフォルトでURLが **［Sign In URL（サインインURL）］** フィールドに入力されます。
4. **［Protocol Binding（プロトコルバインディング）］** フィールドが、SAML IdPで予想されるものに一致することを確認します。

## Auth0がSAML IdPであるときにSLOを構成する

Auth0がSAML IdPであるときに検討すべきログアウトシナリオは2つあります。

* アプリケーション起点
* IdP起点

両方のシナリオでは、ログアウト応答の送信場所がわかるように、[SAML2 Webアプリのアドオンを構成する](/docs/ja-jp/authenticate/protocols/saml/saml-sso-integrations/enable-saml2-web-app-addon)必要があります。

1. [［Auth0 Dashboard］>［Applications（アプリケーション）］>［Applications（アプリケーション）］](https://manage.auth0.com/#/applications)の順に進み、アプリケーションを選択します。
2. **［Addons（アドオン）］** タブに移動し、 **［SAML2 Web App（SAML2 Webアプリ）］** を選択します。
3. **［Settings（設定）］** タブに移動します。
4. **［Settings（設定）］** ボックスを見つけ、次のプロパティを使って`logout`オブジェクトを追加（または更新）します。

   * `callback`：アプリケーションのSLO URLを入力します。
   * `slo_enabled`：IdP起点のSLOを有効にしたい場合は`true`を入力します。ここでは、ユーザーがAuth0 SAML IdPからログアウトすると、SAMLログアウト要求がアプリケーションに送信されます。そうでない場合は、`false`を入力します。

     ```bash cURL lines
     {
       "logout": {
         "callback": "https://myapp.exampleco.com/saml/logout",
         "slo_enabled": true
       }
     }
     ```

     

     

デフォルトでは、Auth0は`HTTP-POST`プロトコルバインディングを使ってSAMLログアウト応答を送信します。アプリケーションで`HTTP-Redirect`プロトコルバインディングを必要とする場合は、そのような`binding`プロパティを追加（または更新）します。

```json JSON lines
{
  "binding": "urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect"
}
```

### アプリケーションを起点とするログアウト

アプリケーションからのログアウトを開始する場合、アプリケーションは要求をAuthentication API [SAML Logoutエンドポイント](https://auth0.com/docs/api/authentication#saml-logout)に送信し、SLOをトリガーする必要があります。

アプリケーションがSLOはサポートしないが、ログアウト後にユーザーに送信するリダイレクトURLをサポートする場合は、リダイレクトURLをAuthentication API [OIDC Logoutエンドポイント](https://auth0.com/docs/api/authentication#oidc-logout)（レガシーログアウトを使用している場合は、Authentication API [Auth0 Logoutエンドポイント](https://auth0.com/docs/api/authentication#auth0-logout)）に設定します。Auth0は他のセッション参加者にログアウトが開始されたことを通知しませんが、ユーザーの[Auth0セッション](/docs/ja-jp/manage-users/sessions/session-layers)は削除されます。

### IdPを起点とするログアウト

ユーザーがAuth0 SAML IdPからログアウトを開始するとき、Auth0はSAMLログアウト応答をSAML2 Webアプリアドオンの［Settings（設定）］内の`logout.callback`プロパティにあるURLに送信します。このプロパティに指定できるURLは1つｄけです。

この制約により、Auth0では、ユーザーがAuth0 SAML IdPに接続された複数のアプリケーションからサインアウトされる必要があるシナリオをネイティブでサポートしません。

ユーザーのAuth0セッションの状態を定期的にチェックし、アプリケーションセッションを適宜終了するようにアプリケーションを構成することで、SLOのような機能を実現することができます。詳細については、「[セッションライフタイムの制限](/docs/ja-jp/manage-users/sessions/session-lifetime-limits)」をお読みください。

## もっと詳しく

* [アプリケーションからユーザーをログアウトする](/docs/ja-jp/authenticate/login/logout/log-users-out-of-applications)
* [OIDCエンドポイントを使用してユーザーをAuth0からログアウトさせる](/docs/ja-jp/authenticate/login/logout/log-users-out-of-auth0)
* [ユーザーをIDプロバイダーからログアウトさせる](/docs/ja-jp/authenticate/login/logout/log-users-out-of-idps)
* [代替ログアウトでユーザーをリダイレクトする](/docs/ja-jp/authenticate/login/logout/redirect-users-after-logout)
* [SAML構成のトラブルシューティング](/docs/ja-jp/troubleshoot/authentication-issues/troubleshoot-saml-configurations)
* [SAMLエラーのトラブルシューティング](/docs/ja-jp/troubleshoot/authentication-issues/saml-errors)