---
title: "OktaをSAML IDプロバイダーとして構成する"
permalink: "configure-okta-as-saml-identity-provider"
'description': "Auth0のSAML IDプロバイダー（IdP）としてOktaを構成する方法を説明します。"
'og:title': "OktaをSAML IDプロバイダーとして構成する"
'og:description': "Auth0のSAML IDプロバイダー（IdP）としてOktaを構成する方法を説明します。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "OktaをSAML IDプロバイダーとして構成する"
'twitter:description': "Auth0のSAML IDプロバイダー（IdP）としてOktaを構成する方法を説明します。"
---

<Card title="始める前に">

* [Okta Developer](https://login.okta.com)アカウントにサインアップします。

</Card>

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Auth0テナントをOkta Workforce Identity Cloudと統合したい場合は、まず[Okta Workforceのエンタープライズ接続](https://auth0.com/docs/authenticate/identity-providers/enterprise-identity-providers/okta)を使用してみてください。

</Callout>

<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-1" href="/docs/ja-jp/glossary?term=security-assertion-markup-language" tip="Security Assertion Markup Language（SAML）: パスワードなしに二者間で認証情報を交換できる標準化プロトコル。" cta="用語集の表示">SAML</Tooltip>エンタープライズ接続を構成して、Auth0のSAML IDプロバイダー（<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-2" href="/docs/ja-jp/glossary?term=idp" tip="IDプロバイダー（IdP）: デジタルIDを保存および管理するサービス。" cta="用語集の表示">IdP</Tooltip>）としてOktaを構成できます。

## OktaのSAMLアプリ統合を構成する

Okta Developer ConsoleでSAMLアプリ統合を作成できます。

### アプリ統合を作成する

1. [Okta Developer Console](https://login.okta.com)にログインします。
2. **［Create App Integration（アプリ統合を作成）］** に移動し、オプションから **［SAML 2.0］** を選択します。
3. 次の設定を構成します：

   <table class="table"><thead>
   <tr>
   <th><b>設定</b></th>
   <th><b>説明</b></th>
   <th><b>例</b></th>
   </tr>
   </thead>
   <tbody>
   <tr>
   <td>Single Sign-On URL（シングルサインオンURL）</td>
   <td>Auth0テナントのログインコールバックURL。</td>
   <td>`https://{yourAuth0Domain}/login/callback?connection={yourAuth0ConnectionName}`</td>
   </tr>
   <tr>
   <td>Audience URI (SP Entity ID)（オーディエンスURI（SPエンティティID））Audience URI (SP Entity ID)</td>
   <td>Auth0接続のオーディエンス値。</td>
   <td>`urn:auth0:{yourAuth0TenantName}:{yourAuth0ConnectionName}`</td>
   </tr>
   </tbody>
   </table>

   <Warning>

   Okta SAMLアプリ統合の構成に使用する接続名の値（`{yourAuth0ConnectionName}`）は、Auth0で作成するSAML接続の名前と一致しなければなりません。

   </Warning>

4. **［Next（次へ）］** そして **［Finish（終了）］** を選択し、Oktaアプリ統合の構成を完了します。

### SSO URLの記録および証明書のダウンロード

現在、ログインフローは、新規作成されたアプリのために **サインオン** ページにダイレクトされるようになりました。

1. **［View SAML Setup Instructions（SAMLのセットアップ手順を表示）］** を選択します。
2. **Identity Provider Single Sign-On URL（IDプロバイダーのシングルサインオンURL）** を記録します。
3. PEMまたはCER形式で **X.509証明書** をダウンロードします。
4. **［Assignments（割り当て）］** に移動し、ユーザーをOktaアプリケーションに割り当てます。

## Auth0でSAML接続を構成する

<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-0" href="/docs/ja-jp/glossary?term=auth0-dashboard" tip="Auth0 Dashboard: サービスを構成するためのAuth0の主製品。" cta="用語集の表示">Auth0 Dashboard</Tooltip>でSAMLエンタープライズ接続を作成できます。

1. [Auth0 Dashboard](https://manage.auth0.com/#)にログインします。
2. [［Authentication（認証）］>［Enterprise（エンタープライズ）］](https://manage.auth0.com/#/connections/enterprise/samlp)に移動します。
3. **SAML** の隣にある **［Create（作成）］** （ **［+］** ボタン）を選択します。
4. 次の設定を構成します：

   <table class="table"><thead>
   <tr>
   <th><b>設定</b></th>
   <th><b>説明</b></th>
   <th><b>例</b></th>
   </tr>
   </thead>
   <tbody>
   <tr>
   <td>接続名</td>
   <td>Auth0の接続名。</td>
   <td>`myoktaconnection`</td>
   </tr>
   <tr>
   <td>サインインURL</td>
   <td>ユーザーログイン要求が送信されるOkta URL。<br/><br/>これは、前に記録した__IDプロバイダーのシングルサインオンURL__です。</td>
   <td>`https://my_okta_tenant_name.okta.com/app/` `my_okta_tenant_namemy_okta_saml_app_integration_name/` `dakflkbzevu5i5zBi939/sso/saml`</td>
   </tr>
   <tr>
   <td>X509署名証明書</td>
   <td>Oktaテナントの公開鍵の署名証明書。<br/><br/>前にダウンロードした__X509証明書__をアップロードします。</td>
   <td>`myOktaTenantSigningCertificate.pem`</td>
   </tr>
   </tbody>
   </table>
5. **［Create（作成）］** を選択します。

## Auth0でSAMLエンタープライズ接続を有効にする

Auth0 DashboardでSAMLエンタープライズ接続を有効にできます。

### Organizations使用時にSAMLエンタープライズ接続を有効にする

Organizationsを使用している場合

1. [Auth0 Dashboard](https://manage.auth0.com/#)にログインします。
2. [Organizations](https://manage.auth0.com/#/organizations)に移動し、あなたのOrganizationを選択します。
3. **［Connections（接続）］** ビューに切り替えます。
4. **［Enable Connections（接続の有効化）］** を選択します。
5. 事前に作成したSAML接続を選択し、 **［Enable Connection（接続の有効化）］** を選択します。

### Organizationsを使用していない時にSAMLエンタープライズ接続を有効にする

Organizationsを使用していない場合

1. [Auth0 Dashboard](https://manage.auth0.com/#)にログインします。
2. [［Authentication（認証）］>［Enterprise（エンタープライズ）］>［SAML］](https://manage.auth0.com/#/connections/enterprise/samlp)に移動し、事前に作成したSAML接続を選択します。
3. **［Applications（アプリケーション）］** ビューに切り替え、選択したアプリケーションの接続を有効にします。

## 接続をテストする

Auth0 Dashboardで接続をテストできます。

1. [Auth0 Dashboard](https://manage.auth0.com/#)にログインします。
2. [［Authentication（認証）］>［Enterprise（エンタープライズ）］>［SAML］](https://manage.auth0.com/#/connections/enterprise/samlp)に移動します。
3. リストから接続を見つけます。
4. **［More Actions（その他のアクション）］** （ **［...］** ボタン）を選択し、 **［Try（試す）］** を選択します。

   * 接続が正しく構成されている場合は、 **［It works!（機能しています）］** 画面が表示されます。
   * そうでない場合は、エラーメッセージとその内容が表示されます。

<Warning>

**［Try（試行）］** ボタンは、Auth0 Dashboardにログインしているユーザーに対してのみ機能します。これを顧客などの匿名ユーザーに送信することはできません。

Oktaユーザーがいない場合は、ユーザーを作成するか、[**IdP起点SSOを構成** ](/docs/ja-jp/authenticate/protocols/saml/saml-sso-integrations/identity-provider-initiated-single-sign-on)する必要があります。

</Warning>

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

サービスプロバイダー起点のログインフローを通じて認証したユーザーに、Okta Dashboardが表示されることがあります。OIDCプロトコルを使ってアプリケーションとAuth0を統合した場合、Auth0は、`state`パラメーターの値を取得し、 SAMLの`RelayState`パラメーターを使ってOktaに渡します。`state`パラメーターを必ずOktaが使用できる値に設定してください。

</Callout>

## グローバルトークン取り消しを構成する

この接続タイプはグローバルトークン取り消しエンドポイントに対応しており、準拠しているIDプロバイダーがAuth0ユーザーセッションとリフレッシュトークンを取り消し、安全なバックチャネルを使用してアプリケーションのバックチャネルログアウトをトリガーできます。

この機能はOkta Workforce Identity Cloudでユニバーサルログアウトと併用できます。

詳しい情報と構成手順については、「[ユニバーサルログアウト](/docs/ja-jp/authenticate/login/logout/universal-logout)」を参照してください。