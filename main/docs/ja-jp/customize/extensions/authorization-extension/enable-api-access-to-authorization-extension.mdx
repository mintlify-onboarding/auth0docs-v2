---
title: "認可拡張機能へのAPIアクセスの有効化"
permalink: "enable-api-access-to-authorization-extension"
'description': "認可拡張機能へのAPIアクセスを有効にする方法について説明します。"
'og:title': "認可拡張機能へのAPIアクセスの有効化"
'og:description': "認可拡張機能へのAPIアクセスを有効にする方法について説明します。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "認可拡張機能へのAPIアクセスの有効化"
'twitter:description': "認可拡張機能へのAPIアクセスを有効にする方法について説明します。"
---

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

Auth0では、ロールベースのアクセス制御（RBAC）を2つの方法で実装できます。これは、API独自の内部アクセス制御システムの代わりに使用することもできれば、両方を組み合わせて使用することもできます。

* [認可コア](/docs/ja-jp/manage-users/access-control/rbac)
* [認可拡張機能](/docs/ja-jp/customize/extensions/authorization-extension)

認可コアの機能セットは、認可拡張機能と同じ機能性を備え、性能と拡張性を向上させると同時に、認可拡張機能より柔軟なRBACシステムを提供します。

現時点では、どちらもRBACの主要な機能を実装し、APIに対して定義されるカスタムスコープをユーザーに権限として割り当てられたスコープに制限することが可能です。

</Callout>

構成とセットアップが完了すると、拡張機能にはユーザーだけでなく、グループ、ロール、権限も含まれるようになります。拡張機能へのAPIアクセスを有効にすると、プロビジョニングを自動化し、ユーザーの認可コンテキストをリアルタイムで照会できます。

## APIアクセスの有効化

1. [［Auth0 Dashboard（Auth0ダッシュボード）］>［Extensions（拡張機能）］>［Auth0 Authorization（Auth0認可）］](https://manage.auth0.com/#/extensions)に移動します。
2. **API** セクションに移動するには、 **［Authorization Dashboard（認可ダッシュボード）］** の右上にあるAuth0テナント名を選択し、 **API** を選択します。

   <Frame>![Dashboard - Extensions - Authorization Extensions Dashboard - Select API](/docs/images/ja-jp/cdy7uua7fh8z/6cF78dwvbK7Sc0JbuxJF85/fbd895fb6f7338559628ea71b3003f52/click-configuration_select-api.png)</Frame>

3. **［Settings（設定）］** ページで、 **［API Access（APIアクセス）］** スイッチを有効にします。

   <Frame>![Dashboard - Extensions - Authorization Extensions Dashboard - Enable API Access](/docs/images/ja-jp/cdy7uua7fh8z/5toxhsSik9EWMnQoK5wTjH/fc40d80a32461e9216f5c69a89e031ec/enable-api-access.png)</Frame>

4. APIアクセスを有効にすると、APIによって発行されたトークンのパラメーターの一部を(拡張機能内で)表示または制御できるようになります。トークンの **［time to expiration（有効期限）］** を制御したり、トークンの **［audience（オーディエンス）］** 、 **［issuer（発行者）］** 、 **URL** を表示してAPIにアクセスしたりすることもできます。

   <Frame>![Dashboard - Extensions - Authorization Extensions Dashboard - API Access Enabled](/docs/images/ja-jp/cdy7uua7fh8z/3WfHXaEyi8FvD8pTDlYQpt/cbe92c5b5f4baf9c35a8c686ff4f511d/api-access-enabled.png)</Frame>

## 拡張機能APIにアクセス

拡張機能へのAPIアクセスを有効にすると、[Auth0 Dashboard](https://manage.auth0.com/#/apis)で使用するためのAPIがAuth0によって自動的に作成されます。APIにアクセスするには、API自体と対話するエンティティであるマシンツーマシンアプリケーションを作成する必要があります。

### アプリケーションの作成

1. [［Auth0 Dashboard］>［Applications（アプリケーション）］>［Applications（アプリケーション）］](https://manage.auth0.com/#/applications)に移動して、 **［Create Application（アプリケーションの作成）］** を選択します。新しいアプリケーションに名前を付け、 **［Machine to Machine Application（マシンツーマシンアプリケーション）］** のタイプを選択します。 **［Create（作成）］** を選択して続行します。アプリケーションの **［Quick Start（クイックスタート）］** ページにリダイレクトされます。ここでは、アプリケーションを使用するAPIに基づいて、ライブドキュメントをカスタマイズできます。Auth0が拡張機能用に作成したAPIを選択します(** auth0-authorization-extension-api** などの名前にする必要があります)。APIとアプリケーションを一緒に操作するのは初めてなので、「This application is not authorized for this API」（このアプリケーションはこのAPIに対して承認されていません）というメッセージが表示されます。APIで使用するアプリケーションを承認するには、 **［Navigate to the API and Authorize（APIに移動して承認）］** を選択します。

   <Frame>![Dashboard - Authorization Extensions - Client Quick Start](/docs/images/ja-jp/cdy7uua7fh8z/UbMM1C6a1GjMIhNlk8cCD/462b9dcd29e5d7f5bbd261490e6a46b0/Dashboard_-_Authorization_Extensions_-_Client_Quick_Start.png)</Frame>

2. APIで使用できるマシンツーマシンアプリケーションのリストが表示されます。作成したアプリケーションの横にあるスイッチを有効にして承認します。

   <Frame>![Dashboard - Authorization Extension - Clients for API](/docs/images/ja-jp/cdy7uua7fh8z/4WFJ3BhCf2kZjbRWhQ0sCp/38aeb0ca9360fd75bd7d54f897ac1735/Dashboard_-_Authorization_Extension_-_Clients_for_API.png)</Frame>

   アプリケーションを承認すると、 **［Grant ID（付与ID）］** が表示されます。アプリケーションに付与する **スコープ** を選択することもできます。付与するスコープは、アクセスするエンドポイントによって異なります。たとえば、[すべてのユーザーを取得](https://auth0.com/docs/api/authorization-extension#get-all-users)するには、`read:users`を付与します。
3. スコープに変更を加えた場合は、 **［Update（更新）］** を選択して保存します。

   <Frame>![Dashboard - Authorization Extension Dashboard - Client Scopes](/docs/images/ja-jp/cdy7uua7fh8z/2RvMFmLusnUOmBp1uXPh1/a78add868b094d37cec63365f745f196/extensions-auth-api-scopes.png)</Frame>

### アクセストークンの取得

APIにアクセスするには、[適切なトークンを要求して取得](/docs/ja-jp/get-started/authentication-and-authorization-flow/client-credentials-flow/call-your-api-using-the-client-credentials-flow)する必要があります。

### APIの呼び出し

APIは次の方法で呼び出すことができます。

* HTML要求
* cURLコマンド

また、エンドポイントに関する詳細情報と、上記の3つの方法を使用して各エンドポイントを呼び出す方法のサンプルについては、[［Authorization Extension API Explorer（認可拡張機能APIエクスプローラー）］](https://auth0.com/docs/api/authorization-extension)を参照してください。

また、 **API Explorer** を参照することもできます。これには、API経由で拡張機能へのアクセスを有効にした後にコマンドラインで実行できるすべての操作が記載されています。

APIドキュメントについては、 **［Explorer（エクスプローラー）］** ページを選択してください。

<Frame>![Authorization Extension API Explorer](/docs/images/ja-jp/cdy7uua7fh8z/5mwKE5muQHYbXKqYZvWOwR/aa0ecec3e5cb803a105d857f24c8b6b7/api-explorer.png)</Frame>

## もっと詳しく

* [認可拡張でルールを使用する](/docs/ja-jp/customize/extensions/authorization-extension/use-rules-with-the-authorization-extension)
* [認可拡張機能のデータをインポートまたはエクスポートする](/docs/ja-jp/customize/extensions/authorization-extension/import-and-export-authorization-extension-data)
* [認可拡張機能のトラブルシューティング](/docs/ja-jp/troubleshoot/authentication-issues/troubleshoot-authorization-extension)