---
title: "Add a CAPTCHA"
permalink: "add-a-captcha"
'description': "Guide to adding a CAPTCHA to your ACUL flow"
'og:title': "Add a CAPTCHA"
'og:description': "Guide to adding a CAPTCHA to your ACUL flow"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "Add a CAPTCHA"
'twitter:description': "Guide to adding a CAPTCHA to your ACUL flow"
---

<Card title="始める前に">

以下が必要です。

* ユニバーサルログインが構成されたAuth0開発テナント。
* カスタムドメイン構成のアプリケーション。
* ローカルホスト上で動作する開発用アプリまたはサンプルアプリ（[Reactサンプルアプリ](https://auth0.com/docs/quickstart/spa/react)など）
* [Identifier First認証](/docs/ja-jp/authenticate/login/auth0-universal-login/identifier-first)が有効になっている
* パスワードを使用するデータベース接続

</Card>

This guide will help you add a CAPTCHA to your [Identifier-First Login screen](/docs/ja-jp/customize/login-pages/advanced-customizations/build-user-flows/id-first-login). To learn more, read the [Getting Started guide](/docs/ja-jp/customize/login-pages/advanced-customizations/getting-started) and visit the [SDK reference guide](/docs/ja-jp/customize/login-pages/advanced-customizations/getting-started/sdk-quickstart).

For more information about Auth0 CAPTCHAs, read [Customize Signup and Login Prompts](/docs/ja-jp/secure/attack-protection/bot-detection).

### Setup

Complete the [Build Identifier First Login with Password](/docs/ja-jp/customize/login-pages/advanced-customizations/build-user-flows/id-first-login) guide and navigate to your local directory.

In your Auth0 tenant, navigate to [Dashboard > Security > Attack Protection](https://manage.auth0.com/#/security/attack-protection/bot-detection) and enable at least one <Tooltip data-tooltip-id="react-containers-DefinitionTooltip-0" href="/docs/ja-jp/glossary?term=bot-detection" tip="ボット検知: Auth0がログインプロセス中にCAPTCHAを有効にすることで、疑わしいボットトラフィックをブロックする攻撃防御の形式。" cta="用語集の表示">Bot Detection</Tooltip> challenge, then choose `Auth Challenge` as your CAPTCHA provider when prompted.

### Create the CAPTCHA file

In your components folder, create a file called SimpleCaptcha.tsx and include the following code.



<Accordion title="Add SimpleCaptcha.tsx">

```tsx lines
interface ISimpleCaptcha {
  image: string;
}

const SimpleCaptcha = ({ image }: ISimpleCaptcha) => (
  <>
    <div>
      <Frame><img src={image} alt="captcha" /></Frame>
    </div>
    <input
      label="Enter the code shown above"
      type="text"
      name="captcha"
      id="captcha"
    />
  </>
);

export default SimpleCaptcha;
```

</Accordion>

### Add the component

Add the following code to the Login ID screen inside the form and after the identifier input.

```tsx lines
{screenProvider.screen.isCaptchaAvailable ?
    <SimpleCaptcha image={screenProvider.screen.captchaImage} />
}
```

An example of a full code block for this screen is below.



<Accordion title="Add a Simple CAPTCHA">

```tsx lines expandable
import { ChangeEvent } from "react";
import { LoginId as ScreenProvider } from "@auth0/auth0-acul-js";
// UI Components
import { Label } from "@/components/ui/label";
import { Input } from "@/components/ui/input";
import { Button } from "@/components/ui/button";
import { Text } from "@/components/ui/text";
import { Link } from "@/components/ui/link";
import SimpleCaptcha from "@/components/ui/simple-captcha";
import {
  CardHeader,
  CardTitle,
  CardDescription,
  CardContent,
} from "@/components/ui/card";
export default function LoginId() {
  // Initialize the SDK for this screen
  const screenProvider = new ScreenProvider();
  // Handle the submit action
  const formSubmitHandler = (event: ChangeEvent<HTMLFormElement>) => {
    event.preventDefault();
    // grab the values from the form
    const identifierInput = event.target.querySelector(
      "input#identifier"
    ) as HTMLInputElement;
    const captchaInput = event.target.querySelector(
      "input[name='captcha']"
    ) as HTMLInputElement;
    // Call the SDK
    screenProvider.login({ 
        username: identifierInput?.value,
        captcha: captchaInput?.value
    });
  };
  // Render the form
  return (
    <form noValidate onSubmit={formSubmitHandler}>
      <CardHeader>
        <CardTitle className="mb-2 text-3xl font-medium text-center">
          {screenProvider.screen.texts?.title ?? "Welcome"}
        </CardTitle>
        <CardDescription className="mb-8 text-center">
          {screenProvider.screen.texts?.description ?? "Login to continue"}
        </CardDescription>
      </CardHeader>
      <CardContent>
        <div className="mb-2 space-y-2">
          <Label htmlFor="identifier">
            {screenProvider.screen.texts?.emailPlaceholder ??
              "Enter your email"}
          </Label>
          <Input
            type="text"
            id="identifier"
            name="identifier"
            defaultValue={
              screenProvider.screen.data?.username ??
              screenProvider.untrustedData.submittedFormData?.username
            }
          />
        </div>
        {screenProvider.screen.isCaptchaAvailable ?
            <SimpleCaptcha image={screenProvider.screen.captchaImage} />
        }
        <Button type="submit" className="w-full">
          {screenProvider.screen.texts?.buttonText ?? "Continue"}
        </Button>
        <Text className="mb-2">
          {screenProvider.screen.texts?.footerText ??
            "Don't have an account yet?"}
          <Link className="ml-1" href={screenProvider.screen.signupLink ?? "#"}>
            {screenProvider.screen.texts?.footerLinkText ??
              "Create your account"}
          </Link>
        </Text>
        <Text>
          Need Help?
          <Link
            className="ml-1"
            href={screenProvider.screen.resetPasswordLink ?? "#"}
          >
            {screenProvider.screen.texts?.forgottenPasswordText ??
              "Forgot your Password?"}
          </Link>
        </Text>
      </CardContent>
    </form>
  );
}
```

</Accordion>

## もっと詳しく

* [ユニバーサルログインの高度なカスタマイズ](/docs/ja-jp/customize/login-pages/advanced-customizations)
* [ACULの使用を開始する](/docs/ja-jp/customize/login-pages/advanced-customizations/getting-started)
* [ACULの画面を構成する](/docs/ja-jp/customize/login-pages/advanced-customizations/getting-started/configure-acul-screens)