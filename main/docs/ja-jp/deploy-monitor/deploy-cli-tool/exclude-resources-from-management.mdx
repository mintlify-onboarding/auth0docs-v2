---
title: "管理からリソースを除外する"
permalink: "exclude-resources-from-management"
'description': "Auth0 Deploy CLIを使用するときにリソースを管理対象から除外する方法を説明します。"
'og:title': "管理からリソースを除外する"
'og:description': "Auth0 Deploy CLIを使用するときにリソースを管理対象から除外する方法を説明します。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "管理からリソースを除外する"
'twitter:description': "Auth0 Deploy CLIを使用するときにリソースを管理対象から除外する方法を説明します。"
---

場合によっては、リソースを管理対象から除外すると便利なことがあります。これは、テナントに特定のリソースが大量に存在し、それらの管理が運用上の負担になっているため、または開発ワークフローが特定のリソースのサブセットにのみ関係し、パフォーマンスのために他のすべてのリソースを省略したいためである可能性があります。いずれにしても、Deploy CLI を使用するときにリソースを除外するためのオプションはいくつかあります。

## タイプ別にリソース全体を除外する

より複雑なテナントの場合は、リソースタイプ全体を省略する必要がある場合があります。例：

* 何千もの組織を抱えるエンタープライズテナント。これらすべてを管理するのは運用上の負担になります。
* CI/CDプロセスはロールの管理にのみ焦点を当てており、他のすべてを除外したいと考えています。
* 機能開発はフックに関係しており、パフォーマンスを最適化するために他のすべてを一時的に除外する必要があります。

このタイプの除外は、リソース名の配列を`AUTH0_EXCLUDED`または `AUTH0_INCLUDED_ONLY`構成プロパティに渡すことによって表現されます。`AUTH0_EXCLUDED`構成プロパティは、提供されたリソースタイプのみを除外します。逆に、`AUTH0_INCLUDED_ONLY`プロパティは、定義されたプロパティを除くすべてのプロパティを除外します。除外は双方向に機能します。つまり、リソース構成ファイルが存在するかどうかに関係なく、Auth0からのエクスポートと Auth0へのインポートの両方で機能します。

除外対象としてサポートされているすべてのリソース値：`actions`、`attackProtection`、`branding`、`clientGrants`、`clients`、`connections`、`customDomains`、`databases`、`emailProvider`、`emailTemplates`、`guardianFactorProviders`、`guardianFactorTemplates`、`guardianFactors`、`guardianPhoneFactorMessageTypes`、`guardianPhoneFactorSelectedProvider`、`guardianPolicies`、`logStreams`、`migrations`、`organizations`、`pages`、`prompts`、`resourceServers`、`roles`、`tenant`、`triggers`。

### 除外例

次の例は、`clients`、`connections`、`databases`、および`organizations`をDeploy CLIによる管理から除外する方法を示しています。

```json lines
{
  "AUTH0_DOMAIN": "example-site.us.auth0.com",
  "AUTH0_CLIENT_ID": "<YOUR_AUTH0_CLIENT_ID>",
  "AUTH0_EXCLUDED": ["clients", "connections", "databases", "organizations"]
}
```

### 包含例

次の例は、Deploy CLIによって`actions`、`clients`、および`connections`のみを管理するように指定する方法を示しています。

```json lines
{
  "AUTH0_DOMAIN": "example-site.us.auth0.com",
  "AUTH0_CLIENT_ID": "<YOUR_AUTH0_CLIENT_ID>",
  "AUTH0_INCLUDED_ONLY": ["actions", "clients", "connections"]
}
```

## IDで単一のリソースを除外する

一部のリソースタイプでは、IDによる個々のリソースの除外がサポートされています。これは、複数の環境で作業していて、下位レベルの環境から本番環境固有のリソースを省略したい場合に便利です。

このメソッドは、それぞれ `AUTH0_EXCLUDED_RULES`、`AUTH0_EXCLUDED_CLIENTS`、`AUTH0_EXCLUDED_DATABASES`、`AUTH0_EXCLUDED_CONNECTIONS`、`AUTH0_EXCLUDED_RESOURCE_SERVERS`構成値を持つルール、クライアント、データベース、接続、およびリソース サーバーでサポートされます。

### 例

```json lines
{
  "AUTH0_DOMAIN": "example-site.us.auth0.com",
  "AUTH0_CLIENT_ID": "<YOUR_AUTH0_CLIENT_ID>",
  "AUTH0_EXCLUDED_CLIENTS": ["Your Application Name"],
  "AUTH0_EXCLUDED_CONNECTIONS": ["con_O1H3KyRMFP1IWRq3", "con_9avEYuj19ihqKBOs"]
}
```

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

IDを使ったリソースの除外は、今後のメジャーバージョンで廃止することが検討されています。詳細については、[リソース除外の提案](https://github.com/auth0/auth0-deploy-cli/blob/6381ce6efa8cd59e7a5c8d37e8915b0989d677b9/docs/excluding-from-management.md?plain=1#L51)を参照してください。

</Callout>

## 省略と空の状態

双方向で強制的に構成を無視するリソースの除外に加えて、Auth0 Deploy CLIは、省略と空の状態という2つの類似した概念をサポートしています。

### 省略

意図的または意図せずに存在しないリソース構成は、インポート中にスキップされます。たとえば、リソース構成が削除された場合、インポート中にスキップされ、リモートテナントの状態は変更されません。

エクスポートには省略の概念はありません。特に除外しない限り、すべてのテナント構成はリソース構成ファイルに書き込まれます。

#### 例

```yaml lines
roles: # roles configuration is not omitted
  - name: Admin
    description: Can read and write things
    permissions: []
  - name: Reader
    description: Can only read things
    permissions: []
# The omission of all other configurations means they'll be skipped over
```

### 空

明示的に空として定義されているリソース構成。フック、組織、アクションなどのセットベースの構成の場合、これらの構成を空のセットに設定すると、それらのリソースが意図的に空になります。AUTH0_ALLOW_DELETE削除構成プロパティが有効になっている限り、これは削除を通知します。このフローの詳細については、[Deploy CLIを構成する](/docs/ja-jp/deploy-monitor/deploy-cli-tool/configure-the-deploy-cli)をお読みください。

テナントやブランディングなどのセットベースではないリソース構成の場合、空の概念は適用されず、削除や除去はトリガーされません。

#### 空の例

```yaml lines
hooks: [] # Empty hooks
connections: [] # Empty connections
tenant: {} # Effectively a no-op, emptiness does not apply to non-set resource config
```

