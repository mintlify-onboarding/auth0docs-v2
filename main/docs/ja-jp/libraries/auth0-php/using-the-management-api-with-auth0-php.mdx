---
title: "PHPï¼šAuth0-PHPã§Management APIã‚’ä½¿ç”¨ã™ã‚‹"
permalink: "using-the-management-api-with-auth0-php"
'description': "Auth0ã®Management APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’PHPã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«çµ±åˆã™ã‚‹"
'og:title': "PHPï¼šAuth0-PHPã§Management APIã‚’ä½¿ç”¨ã™ã‚‹"
'og:description': "Auth0ã®Management APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’PHPã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«çµ±åˆã™ã‚‹"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "PHPï¼šAuth0-PHPã§Management APIã‚’ä½¿ç”¨ã™ã‚‹"
'twitter:description': "Auth0ã®Management APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’PHPã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«çµ±åˆã™ã‚‹"
---

Auth0 PHP SDKã«ã¯`Auth0\SDK\API\Management`ã‚¯ãƒ©ã‚¹ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã®ã‚¯ãƒ©ã‚¹ã«ã¯ã€[Management API](https://auth0.com/docs/api/management/v2)ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã€Auth0ãƒ†ãƒŠãƒ³ãƒˆã§æ“ä½œã‚’å®Ÿè¡Œã™ã‚‹ã®ã«ä½¿ç”¨ã§ãã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ãŒæ ¼ç´ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã“ã¨ãŒç°¡å˜ã«ã§ãã¾ã™ã€‚

* ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ¤œç´¢ã¨ä½œæˆ
* ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ä½œæˆã¨æ›´æ–°
* ãƒ­ã‚°ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã®å–å¾—
* ãƒ«ãƒ¼ãƒ«ã‚’ç®¡ç†ã™ã‚‹

ã“ã®ã»ã‹ã«ã‚‚å¤šæ•°ã®ã“ã¨ãŒã§ãã¾ã™ã€‚è©³ç´°ã«ã¤ã„ã¦ã¯ã€ã€Œ[APIãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](https://auth0.com/docs/api/management/v2)ã€ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚èªè¨¼

<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-0" href="/docs/ja-jp/glossary?term=management-api" tip="Management API: é¡§å®¢ãŒç®¡ç†ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã®è£½å“ã€‚" cta="ç”¨èªé›†ã®è¡¨ç¤º">Management API</Tooltip>ã‚’ä½¿ç”¨ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã®æ–¹æ³•ã§èªè¨¼ã‚’è¡Œã†å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

* ä¸€æ™‚çš„ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã‹ãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½ã™ã‚‹å ´åˆã«ã¯ã€[APIãƒˆãƒ¼ã‚¯ãƒ³ã‚’æ‰‹å‹•ã§ç”Ÿæˆã—](/docs/ja-jp/secure/tokens/access-tokens/management-api-access-tokens)ã€`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã—ã¾ã™ã€‚
* æ‹¡å¼µã‚¢ã‚¯ã‚»ã‚¹ã§ã¯ã€ã‚¢ã‚¯ã‚»ã‚¹ãŒå¿…è¦ãªå ´åˆã«ã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè³‡æ ¼æƒ…å ±ä»˜ä¸ã‚’ä½œæˆã—ã¦å®Ÿè¡Œã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®ãƒ—ãƒ­ã‚»ã‚¹ã®è©³ç´°ã«ã¤ã„ã¦ã¯ã€[Authentication APIãƒšãƒ¼ã‚¸](/docs/ja-jp/libraries/auth0-php/using-the-authentication-api-with-auth0-php)ã‚’ã”è¦§ãã ã•ã„ã€‚

ã„ãšã‚Œã®æ–¹å¼ã§ã‚‚ã€ç”Ÿæˆã•ã‚ŒãŸãƒˆãƒ¼ã‚¯ãƒ³ã«ã¯ã‚¢ãƒ—ãƒªã§å®Ÿè¡Œã™ã‚‹æ“ä½œã«å¿…è¦ãªã‚¹ã‚³ãƒ¼ãƒ—ãŒå«ã¾ã‚Œã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã‚¢ã‚¯ã‚»ã‚¹ã—ã‚ˆã†ã¨ã™ã‚‹ç‰¹å®šã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«å¿…è¦ãªã‚¹ã‚³ãƒ¼ãƒ—ã«ã¤ã„ã¦ã¯ã€[APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](/docs/ja-jp/api/management/v2)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

å¿…è¦ãªã‚¹ã‚³ãƒ¼ãƒ—ã‚’ä»˜ä¸ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¾ã™ã€‚

1. [ï¼»APIï¼½](https://manage.auth0.com/#/apis) >ï¼»Auth0 Management APIï¼½> **ï¼»Machine to Machine Applicationsï¼ˆãƒã‚·ãƒ³ãƒ„ãƒ¼ãƒã‚·ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ï¼½** ã‚¿ãƒ–ã®é †ã«ç§»å‹•ã—ã¾ã™ã€‚
2. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¦‹ã¤ã‘ã¦èªå¯ã—ã¾ã™ã€‚
3. çŸ¢å°ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦åˆ—ã‚’æ‹¡å¼µã—ã€å¿…è¦ãªã‚¹ã‚³ãƒ¼ãƒ—ã‚’é¸æŠã—ã¾ã™ã€‚

ä¸Šè¨˜ã®ã„ãšã‚Œã‹ã®æ–¹æ³•ã‚’èªè¨¼ã—ã€ãã®ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½¿ã£ã¦æ“ä½œã‚’å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```php lines
// ğŸ‘† We're continuing from the "getting started" guide linked in "Prerequisites" above. Append this to the index.php file you created there.

if (isset($env['AUTH0_MANAGEMENT_API_TOKEN'])) {
    $auth0->configuration()->setManagementToken($env['AUTH0_MANAGEMENT_API_TOKEN']);
}

// Create a configured instance of the `Auth0\SDK\API\Management` class, based on the configuration we setup the SDK ($auth0) using.
// If no AUTH0_MANAGEMENT_API_TOKEN is configured, this will automatically perform a client credentials exchange to generate one for you, so long as a client secret is configured.
$management = $auth0->management();
```

`Management`ã‚¯ãƒ©ã‚¹ã¯ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¡ã‚½ãƒƒãƒ‰ã¨ã—ã¦ä¿å­˜ã—ã¾ã™ã€‚ãŸã¨ãˆã°ã€`$management->users()`ã¯/users Management APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®æ“ä½œã«ä½¿ç”¨ã§ãã‚‹`Auth0\SDK\API\Management\Users`ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’è¿”ã—ã¾ã™ã€‚

### ä¾‹ - Search Users by Emailï¼ˆãƒ¡ãƒ¼ãƒ«ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ¤œç´¢ã™ã‚‹ï¼‰

ã“ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯[ã“ã¡ã‚‰ã«](/docs/ja-jp/api/management/v2#!/Users/get_users)è¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚

```php lines
// ğŸ‘† We're continuing from the code above. Append this to your source code file.

$response = $management->users()->getAll(['q' => 'josh']);

// Does the status code of the response indicate failure?
if ($response->getStatusCode() !== 200) {
    die("API request failed.");
}

// Decode the JSON response into a PHP array:
$response = json_decode(response->getBody()->__toString(), true, 512, JSON_THROW_ON_ERROR);

if (! empty($response)) {
    echo '<h2>User Results</h2>';

    foreach ($response as $result) {
        printf(
            '<p><strong>%s</strong> &lt;%s&gt; - %s</p>',
            !empty($result['nickname']) ? $result['nickname'] : 'No nickname',
            !empty($result['email']) ? $result['email'] : 'No email',
            $result['user_id']
        );
    }
}
```

### ä¾‹ - Get All Clientsï¼ˆã™ã¹ã¦ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’å–å¾—ã™ã‚‹ï¼‰

ã“ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯[ã“ã¡ã‚‰ã«](/docs/ja-jp/api/management/v2#!/Clients/get_clients)è¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚

```php lines
// ğŸ‘† We're continuing from the code above. Append this to your source code file.

$response = $management->clients()->getAll(['q' => 'josh']);

// Does the status code of the response indicate failure?
if ($response->getStatusCode() !== 200) {
    die("API request failed.");
}

// Decode the JSON response into a PHP array:
$response = json_decode(response->getBody()->__toString(), true, 512, JSON_THROW_ON_ERROR);

if (! empty($response)) {
    echo '<h2>Get All Clients</h2>';

    foreach ($response as $result) {
        printf(
            '<p><strong>%s</strong> - %s</p>',
            $result['name'],
            $result['client_id']
        );
    }
}
```

## ã‚‚ã£ã¨è©³ã—ã

* [PHPï¼šAuth0-PHPã‚’ä½¿ç”¨ã—ã¦å§‹ã‚ã‚‹](/docs/ja-jp/libraries/auth0-php)
* [PHPï¼šAuth0-PHPã‚’ä½¿ç”¨ã—ãŸãƒ­ã‚°ã‚¤ãƒ³ã€ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã®è¿”é€](/docs/ja-jp/libraries/auth0-php/auth0-php-basic-use)
* [PHPï¼šAuth0-PHPã§Authentication APIã‚’ä½¿ç”¨ã™ã‚‹](/docs/ja-jp/libraries/auth0-php/using-the-authentication-api-with-auth0-php)
* [PHPï¼šAuth0-PHPã‚’ä½¿ç”¨ã—ãŸJWTï¼ˆJSON Web Tokenï¼‰ã®æ¤œè¨¼](/docs/ja-jp/libraries/auth0-php/validating-jwts-with-auth0-php)
* [PHPAuth0-PHPçµ±åˆã®ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](/docs/ja-jp/libraries/auth0-php/troubleshoot-auth0-php-library)