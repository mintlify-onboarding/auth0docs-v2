---
title: "Auth0.swift：Touch ID / Face ID認証"
permalink: "auth0-swift-touchid-faceid"
'description': "Auth0.swiftを使ってTouch IDやFace IDでの認証を実装する方法について説明します。"
'og:title': "Auth0.swift：Touch ID / Face ID認証"
'og:description': "Auth0.swiftを使ってTouch IDやFace IDでの認証を実装する方法について説明します。"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "Auth0.swift：Touch ID / Face ID認証"
'twitter:description': "Auth0.swiftを使ってTouch IDやFace IDでの認証を実装する方法について説明します。"
---
import {AuthCodeBlock} from "/snippets/AuthCodeBlock.jsx";


次のようなシナリオです：ユーザーが認証したら、そのユーザーの資格情報を保管して、有効期間中は継続して使用したいと考えます。有効期限が切れたら、`refreshToken`を使って更新し、ログインページが再度表示されないようにしたいと考えます。これを自動的に行うのではなく、ユーザーの指紋認識や顔認識で本人確認を求めます。

これを行うには、[資格情報マネージャー](https://github.com/auth0/Auth0.swift/blob/master/Auth0/CredentialsManager.swift)ユーティリティを[Auth0.swift](https://github.com/auth0/Auth0.swift/)内で使用して、ユーザーの資格情報を合理的に管理し、生体認証を処理します。

## 使用の開始

まず、次を実行して`Auth0`モジュールをインポートします：

`import Auth0`

### 資格情報マネージャー

資格情報を取得する前に、iOSデバイスが対応している生体認証（Face IDまたはTouch ID）を活用することもできます。

資格情報マネージャーをセットアップすることから始めます。そして、生体認証を有効化します。タイトルに渡して、画面に表示することもできます。

```swift lines
let credentialsManager = CredentialsManager(authentication: Auth0.authentication())
credentialsManager.enableBiometrics(withTitle: "Touch ID / Face ID Login")
```

[NSFaceIDUsageDescription](https://developer.apple.com/library/archive/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW75)設定をプロジェクトの`Info.plist`に追加して、Face ID使用の理由が表示されるようにすることを強くお勧めします。場合によっては、説明文字列を提供しない場合、ユーザーがFace IDで認証しようとしたときに失敗することがあります。

```swift lines
...
<key>NSFaceIDUsageDescription</key>
<string>Reason why we use Face ID here</string>
...
```

### ログイン

ユニバーサルログインページを表示して、認証が成功したら、資格情報を資格情報マネージャーに渡します。

export const codeExample = `Auth0
    .webAuth()
    .scope("openid profile offline_access")
    .audience("https://{yourDomain}/userinfo")
    .start {
        switch $0 {
        case .failure(let error):
            // Handle error
        case .success(let credentials):
            // Store credentials securely with the Credentials Manager
            credentialsManager.store(credentials: credentials)
        }
}`;

<AuthCodeBlock children={codeExample} language="swift" />

### ユーザーの資格情報を更新する

ユーザーの資格情報を更新しなければならない場合には、資格情報マネージャーから`credentials`メソッドを呼び出します。

```swift lines
credentialsManager.credentials { error, credentials in
    guard error == nil, let credentials = credentials else {
        // Handle error
        // Fallback to login screen
    }
    // Continue routing the user as authentication was successful
}
```

新しい資格情報を手動で保管する必要はありません。更新時に資格情報マネージャーが処理します。

## 次の手順

プロジェクトのサンプルをダウンロードして、iOSのクイックスタートにある「[iOSのTouch ID / Face ID](/docs/ja-jp/quickstart/native/ios-swift/08-touch-id-authentication)」セクションの指示に従います。