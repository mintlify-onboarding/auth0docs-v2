---
title: "MFA用の生体認証デバイスを使用したWebAuthnの設定"
permalink: "configure-webauthn-device-biometrics-for-mfa"
'description': "生体認証デバイスを使用したWebAuthnの設定方法について説明します"
'og:title': "MFA用の生体認証デバイスを使用したWebAuthnの設定"
'og:description': "生体認証デバイスを使用したWebAuthnの設定方法について説明します"
'og:image': "https://cdn2.auth0.com/docs/1.14567.0/img/share-image.png"
'twitter:title': "MFA用の生体認証デバイスを使用したWebAuthnの設定"
'twitter:description': "生体認証デバイスを使用したWebAuthnの設定方法について説明します"
---

WebAuthn入門と、Auth0がWebAuthnをセキュリティキーと[デバイスの生体認証](/docs/ja-jp/secure/multi-factor-authentication/fido-authentication-with-webauthn/configure-webauthn-security-keys-for-mfa)の両方で実装する方法については、「[WebAuthnを使ったFIDO認証](/docs/ja-jp/secure/multi-factor-authentication/fido-authentication-with-webauthn)」をご覧ください。

<Card title="利用可能性はAuth0プランによって異なる">

この機能が利用できるかどうかは、使用しているログイン実装とAuth0プラン（または契約）によります。詳細については、「[価格設定](https://auth0.com/pricing)」をお読みください。

</Card>

<Warning>

カスタムドメインを設定する場合は、WebAuthnを運用環境でロールアウトする**前に** 行ってください。カスタムドメインを設定・変更すると、以前に登録したユーザーが認証できなくなります。

ユーザーの認証に使用するドメインを指定するには、[［Relying Party（証明書利用者）］](#configure-relying-party)設定を使用します。

</Warning>

## Dashboardの使用

[［Dashboard］>［Security（セキュリティ）］>［Multifactor Auth（多要素認証）］](https://manage.auth0.com/#/security/mfa)に移動して、**［WebAuthn with Device Biometrics（生体認証デバイスを使用したWebAuthn）］** を有効にします。唯一の要素を有効にすることはできないため、追加の要素を有効にする必要があります。

## 証明書利用者を構成する

WebAuthnは、資格情報をブラウザーのオリジンとバインドして、フィッシングできないようにします。ユーザーも、登録していないサイトに対してはWebAuthnを使用できません。

資格情報をオリジンとバインドするため、カスタムドメインを構成・変更すると、変更前に登録したユーザーは認証されなくなります。

WebAuthnは、ユーザーの認証に使用されるドメインを指定できる[証明書利用者ID属性](https://www.w3.org/TR/webauthn-2/#relying-party-identifier)を定義します。ブラウザーオリジンの登録可能なドメインサフィックスに設定できます。たとえば、カスタムドメインがaccounts.acme.comなら、証明書利用者IDをacme.comに設定することができます。そうすれば、ユーザーは、WebAuthn資格情報を使用してacme.comのあらゆるドメインでユーザー認証ができます。

Auth0で証明書利用者IDを指定できるのは、カスタムドメインが構成されている場合に限られます。カスタムドメインが変更された場合は、証明書利用者IDを更新しなければなりません。

## デバイスの認識

生体認証デバイスを使用してWebAuthnを有効にすると、Auth0はエンドユーザーのWebAuthn対応デバイスすべてを段階的に登録しようとします。Javascriptが無効になっているブラウザ、またはWebAuthnプラットフォームauthenticatorシステムをサポートしていないブラウザでは、生体認証デバイスを使用して登録または認証するオプションは利用できません。

ユーザーにWebAuthnを要求せずに特定のデバイスが登録されたかどうかを知る決定的な方法がないため、Auth0はユーザーエージェントに依存して何をすべきかを決定します。動作はオペレーティング システムによって異なります。

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

ユーザーが常に同じブラウザーを使用し、携帯電話1台とPCまたはノートパソコン1台を持っている、という最も一般的な状況では、以下で述べるような動作の微妙な違いがユーザーエクスペリエンスに影響を与えることはありません。

</Callout>

### WindowsおよびiOS 14.5以降

WindowsおよびiOS 14.5以降では、WebAuthnプラットフォームauthenticatorは**operating system level（オペレーティング システム レベル）** で登録されます。ユーザーは1つのブラウザで登録し、任意のブラウザでログインできます。Auth0がユーザーのデバイスが登録されていることを検出すると、Face ID / Touch ID / Windows Hello で認証するオプションが表示されます。同じデバイスで登録した場合は、認証できるようになります。そうでない場合は失敗し、別の認証方法を使用する必要があります。

### macOS

Macでは、WebAuthnプラットフォームauthenticatorは **［browser（ブラウザ）］** システムレベルで登録されます。ユーザーは、使用するブラウザごとにWebAuthnに登録するよう求められます。Auth0は、ユーザーがMac上のChromeから登録したことを検出すると、Mac上のChromeからログインするときにTouch IDで認証するオプションが表示されます。同じMacから登録した場合は、認証できます。そうでない場合は認証は失敗し、別の認証方法を使用する必要があります。同じMacのSafariから登録しようとすると、他の認証方法で<Tooltip data-tooltip-id="react-containers-DefinitionTooltip-0" href="/docs/ja-jp/glossary?term=multifactor-authentication" tip="多要素認証（MFA）: ユーザー名とパスワードに加えて、SMS経由のコードなどの要素を使用するユーザー認証プロセス。" cta="用語集の表示">MFA</Tooltip>を完了するように求められ、その後Touch IDで**［prompted to enroll（登録するように求められます）］** 。

### Android

Androidでは、**Chromeのみ** がWebAuthnプラットフォームauthenticatorsシステムをサポートしています。Auth0は、ユーザーがAndroidデバイスを登録していることを検出すると、Androidの指紋/顔認識で認証するオプションが表示されます。同じAndroidデバイスで登録した場合は、認証が可能になります。そうでない場合は失敗し、別の認証方法を使用する必要があります。

## デバイス対応

生体認証デバイスを使用する前に、ユーザーは別のMFA登録を有効にする必要があります。

生体認証デバイスキーを使用するには、ブラウザでJavaScriptが有効になっていてWebAuthnプラットフォームauthenticatorsシステムがサポートされている必要があります。これらの条件が満たされない場合、Auth0はデバイスの登録または認証のオプションを提供しません。Auth0はユーザーに別の要素を要求します。

主要なブラウザーやオペレーティングシステムの最新バージョンでは、セキュリティキーを使ったWebAuthnに対応しています。詳細については、[webauthn.meのブラウザサポートセクション](https://webauthn.me/browser-support)をご覧ください。

## 制限事項

* プログレッシブ登録プロンプト以外に、WebAuthn生体認証デバイスを使用して登録する方法はありません。
* [MFA API](/docs/ja-jp/secure/multi-factor-authentication/multi-factor-authentication-developer-resources/mfa-api)の使用では、WebAuthnにある登録内容をリスト表示して削除することはできますが、登録はできません。
* ユーザーは、生体認証デバイスを備えたWebAuthnを使用して、タイプごとに1つのデバイスのみを登録できます（電話1台、タブレット1台、ラップトップ/デスクトップ1台）。ユーザーが同じタイプの別のデバイスを登録する場合は、最初のデバイスを登録解除する必要があります。

## Webauthn.me

Auth0は[webauthn.me](https://a0.to/webauthme-auth0-docs)を管理しており、そこにはWebAuthnに関する[詳細な情報](https://webauthn.me/introduction)と、WebAuthnをサポートするブラウザの最新リストが掲載されています。

## もっと詳しく

* [MFAのために秘密鍵でWebAuthnを構成する](/docs/ja-jp/secure/multi-factor-authentication/fido-authentication-with-webauthn/configure-webauthn-security-keys-for-mfa)