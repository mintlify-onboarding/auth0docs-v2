---
title: Add Authorization to Your Flask API Application
sidebarTitle: Python API

---
import { Recipe, Content, Section, SideMenu, SideMenuSectionItem, SignUpForm } from "/snippets/recipe.jsx";
import { LoggedInForm } from "/snippets/Login.jsx";
import Validator from "/snippets/quickstart/backend/python/validator.py.mdx";
import Server from "/snippets/quickstart/backend/python/server.py.mdx";

export const sections = [
  { id: "define-permissions", title: "Define permissions" },
  { id: "install-dependencies", title: "Install dependencies" },
  { id: "create-the-jwt-validator", title: "Create the JWT validator" },
  { id: "create-a-flask-application", title: "Create a Flask application" }
]

<Recipe isSingleColumn>
  <Content>
    This guide demonstrates how to integrate Auth0 with any new or existing Python API built with [Flask](https://flask.palletsprojects.com/).

    If you haven't created an API in your Auth0 dashboard yet, you can use the interactive selector to create a new
        Auth0 API or select an existing API that represents the project you want to integrate with.

    Alternatively, you can read [our getting started guide](https://auth0.com/docs/get-started/auth0-overview/set-up-apis) that helps you set up your first API through the Auth0 dashboard.

    Every API in Auth0 is configured using an API Identifier that your application code will use as the Audience to
        validate the Access Token.

    <Callout icon="file-lines" iconType="regular">
    **New to Auth0?** Learn [how Auth0 works](https://auth0.com/docs/overview)
                  and read about [implementing API authentication
                    and authorization](https://auth0.com/docs/api-auth) using the OAuth 2.0 framework.
    </Callout>

    <Section id={sections[0].id} title={sections[0].title} stepNumber="1" isSingleColumn>
      Permissions let you define how resources can be accessed on behalf of the user with a given access token. For
            example, you might choose to grant read access to the `messages` resource if users have the manager
            access level, and a write access to that resource if they have the administrator access level.

      You can define allowed permissions in the **Permissions** view of the Auth0 Dashboard's [APIs](https://manage.auth0.com/#/apis) section.

      <Frame>
        <img src="/images/cdy7uua7fh8z/1s3Yp5zqJiKiSWqbPSezNO/e61793a2822d095666002c3f65c71ac2/configure-permissions.png" />
      </Frame>

      <Callout icon="file-lines" iconType="regular">
      This example uses the `read:messages` scope.
      </Callout>
    
    <LoggedInForm />
</Section>

    <Section id={sections[1].id} title={sections[1].title} stepNumber="2" isSingleColumn>
      Add the following dependencies to your `requirements.txt`:

      ```txt lines
      # /requirements.txt
      flask

      Authlib
      ```

    
    <LoggedInForm />
</Section>

    <Section id={sections[2].id} title={sections[2].title} stepNumber="3" isSingleColumn>
      We're going to use a library called [Authlib](https://github.com/lepture/authlib) to create a [ResourceProtector](https://docs.authlib.org/en/latest/flask/1/resource-server.html), which is a type of [Flask decorator](https://flask.palletsprojects.com/patterns/viewdecorators/) that protects our resources (API routes) with a given validator.

      The validator will validate the Access Token that we pass to the resource by checking that it has a valid
            signature and claims.

      We can use AuthLib's `JWTBearerTokenValidator` validator with a few tweaks to make sure it conforms to
            our requirements on [validating Access Tokens](https://auth0.com/docs/secure/tokens/access-tokens/validate-access-tokens).

      To create our `Auth0JWTBearerTokenValidator` we need to pass it our `domain` and
            `audience` (API Identifier). It will then get the public key required to verify the token's signature
            and pass it to the `JWTBearerTokenValidator` class.

      We'll then override the class's `claims_options` to make sure the token's expiry, audience and issue
            claims are validated according to our requirements.
    
    <CodeGroup>
          <Validator />
          <Server />
        </CodeGroup>
</Section>

    <Section id={sections[3].id} title={sections[3].title} stepNumber="4" isSingleColumn>
      Next we'll create a Flask application with 3 API routes:

      - `/api/public`A public endpoint that requires no authentication.
      - `/api/private`A private endpoint that requires a valid Access Token JWT.
      - `/api/private-scoped`A private endpoint that requires a valid Access Token JWT that contains the
                given `scope`.

      The protected routes will have a `require_auth` decorator which is a `ResourceProtector`
            that uses the `Auth0JWTBearerTokenValidator` we created earlier.

      To create the `Auth0JWTBearerTokenValidator` we'll pass it our tenant's domain and the API Identifier
            of the API we created earlier.

      The `require_auth` decorator on the `private_scoped` route accepts an additional argument
            `"read:messages"`, which checks the Access Token for the Permission (Scope) we created earlier.

      ### Make a Call to Your API

      To make calls to your API, you need an Access Token. You can get an Access Token for testing purposes from the
            **Test** view in your [API
              settings](https://manage.auth0.com/#/apis).

      <Frame>
        <img src="/images/cdy7uua7fh8z/6jeVBuypOGX5qMRXeJn5ow/5e79037f6c852d2043789d622bdb9562/Quickstart_Example_App_-_English.png" />
      </Frame>

      Provide the Access Token as an `Authorization` header in your requests.

      <CodeGroup>
      ```bash cURL lines
      curl --request get \
      --url 'http:///%7ByourDomain%7D/api_path' \
      --header 'authorization: Bearer YOUR_ACCESS_TOKEN_HERE'
      ```

      ```csharp C# lines
      var client = new RestClient("http:///%7ByourDomain%7D/api_path");
      var request = new RestRequest(Method.GET);
      request.AddHeader("authorization", "Bearer YOUR_ACCESS_TOKEN_HERE");
      IRestResponse response = client.Execute(request);
      ```

      ```go Go lines
      package main
      import (
      "fmt"
      "net/http"
      "io/ioutil"
      )
      func main() {
      url := "http:///%7ByourDomain%7D/api_path"
      req, _ := http.NewRequest("get", url, nil)
      req.Header.Add("authorization", "Bearer YOUR_ACCESS_TOKEN_HERE")
      res, _ := http.DefaultClient.Do(req)
      defer res.Body.Close()
      body, _ := ioutil.ReadAll(res.Body)
      fmt.Println(res)
      fmt.Println(string(body))
      }
      ```

      ```java Java lines
      HttpResponse<String> response = Unirest.get("http:///%7ByourDomain%7D/api_path")
      .header("authorization", "Bearer YOUR_ACCESS_TOKEN_HERE")
      .asString();
      ```

      ```javascript Node.JS lines
      var axios = require("axios").default;
      var options = {
      method: 'get',
      url: 'http:///%7ByourDomain%7D/api_path',
      headers: {authorization: 'Bearer YOUR_ACCESS_TOKEN_HERE'}
      };
      axios.request(options).then(function (response) {
      console.log(response.data);
      }).catch(function (error) {
      console.error(error);
      });
      ```

      ```obj-c Obj-C lines
      #import <Foundation/Foundation.h>
      NSDictionary *headers = @{ @"authorization": @"Bearer YOUR_ACCESS_TOKEN_HERE" };
      NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http:///%7ByourDomain%7D/api_path"]
                                                      cachePolicy:NSURLRequestUseProtocolCachePolicy

                                                  timeoutInterval:10.0];

      [request setHTTPMethod:@"get"];
      [request setAllHTTPHeaderFields:headers];
      NSURLSession *session = [NSURLSession sharedSession];
      NSURLSessionDataTask *dataTask = [session dataTaskWithRequest:request
                                              completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) {

                                                  if (error) {

                                                      NSLog(@&quot;%@&quot;, error);

                                                  } else {

                                                      NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *) response;

                                                      NSLog(@&quot;%@&quot;, httpResponse);

                                                  }

                                              }];

      [dataTask resume];
      ```

      ```php PHP lines
      #import <Foundation/Foundation.h>
      NSDictionary *headers = @{ @"authorization": @"Bearer YOUR_ACCESS_TOKEN_HERE" };
      NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http:///%7ByourDomain%7D/api_path"]
                                                      cachePolicy:NSURLRequestUseProtocolCachePolicy

                                                  timeoutInterval:10.0];

      [request setHTTPMethod:@"get"];
      [request setAllHTTPHeaderFields:headers];
      NSURLSession *session = [NSURLSession sharedSession];
      NSURLSessionDataTask *dataTask = [session dataTaskWithRequest:request
                                              completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) {

                                                  if (error) {

                                                      NSLog(@&quot;%@&quot;, error);

                                                  } else {

                                                      NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *) response;

                                                      NSLog(@&quot;%@&quot;, httpResponse);

                                                  }

                                              }];

      [dataTask resume];
      ```

      ```python Python lines
      import http.client
      conn = http.client.HTTPConnection("")
      headers = { 'authorization': "Bearer YOUR_ACCESS_TOKEN_HERE" }
      conn.request("get", "/%7ByourDomain%7D/api_path", headers=headers)
      res = conn.getresponse()
      data = res.read()
      print(data.decode("utf-8"))
      ```

      ```ruby Ruby lines
      require 'uri'
      require 'net/http'
      url = URI("http:///%7ByourDomain%7D/api_path")
      http = Net::HTTP.new(url.host, url.port)
      request = Net::HTTP::Get.new(url)
      request["authorization"] = 'Bearer YOUR_ACCESS_TOKEN_HERE'
      response = http.request(request)
      puts response.read_body
      ```

      ```swift Swift lines
      import Foundation
      let headers = ["authorization": "Bearer YOUR_ACCESS_TOKEN_HERE"]
      let request = NSMutableURLRequest(url: NSURL(string: "http:///%7ByourDomain%7D/api_path")! as URL,
                                          cachePolicy: .useProtocolCachePolicy,

                                      timeoutInterval: 10.0)

      request.httpMethod = "get"
      request.allHTTPHeaderFields = headers
      let session = URLSession.shared
      let dataTask = session.dataTask(with: request as URLRequest, completionHandler: { (data, response, error) -> Void in
      if (error != nil) {
      print(error)

      } else {
      let httpResponse = response as? HTTPURLResponse

      print(httpResponse)

      }
      })
      dataTask.resume()
      ```
      </CodeGroup>

    
    <CodeGroup>
          <Server />
          <Validator />
        </CodeGroup>
</Section>

    ## Next Steps

    Excellent work! If you made it this far, you should now have login, logout, and user profile information running in your application.

    This concludes our quickstart tutorial, but there is so much more to explore. To learn more about what you can do with Auth0, check out:

    *   [Auth0 Dashboard](https://manage.auth0.com/dashboard/us/dev-gja8kxz4ndtex3rq) - Learn how to configure and manage your Auth0 tenant and applications
    *   [auth0-python SDK](https://github.com/auth0/auth0-python) - Explore the SDK used in this tutorial more fully
    *   [Auth0 Marketplace](https://marketplace.auth0.com/) - Discover integrations you can enable to extend Auth0â€™s functionality
  </Content>

  
</Recipe>
