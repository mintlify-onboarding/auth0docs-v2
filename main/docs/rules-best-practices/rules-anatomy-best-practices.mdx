---
'og:description': Learn about best practices for building Auth0 rules.
'og:image': https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
'og:title': Rules Anatomy Best Practices
'og:url': https://auth0.com/docs/
permalink: rules-anatomy-best-practices
title: Rules Anatomy Best Practices
'twitter:description': Learn about best practices for building Auth0 rules.
'twitter:title': Rules Anatomy Best Practices
---
<Warning>

The End of Life (EOL) date of Rules and Hooks will be **November 18, 2026**, and they are no longer available to new tenants created as of **October 16, 2023**. Existing tenants with active Hooks will retain Hooks product access through end of life.

We highly recommend that you use Actions to extend Auth0. With Actions, you have access to rich type information, inline documentation, and public `npm` packages, and can connect external integrations that enhance your overall extensibility experience. To learn more about what Actions offer, read [Understand How Auth0 Actions Work](/docs/customize/actions/actions-overview).

To help with your migration, we offer guides that will help you [migrate from Rules to Actions](/docs/customize/actions/migrate/migrate-from-rules-to-actions) and [migrate from Hooks to Actions](/docs/customize/actions/migrate/migrate-from-hooks-to-actions). We also have a dedicated [Move to Actions](https://auth0.com/extensibility/movetoactions) page that highlights feature comparisons, [an Actions demo](https://www.youtube.com/watch?v=UesFSY1klrI), and other resources to help you on your migration journey.

To read more about the Rules and Hooks deprecation, read our blog post: [Preparing for Rules and Hooks End of Life](https://auth0.com/blog/preparing-for-rules-and-hooks-end-of-life/).

</Warning>

A rule is essentially an anonymous JavaScript function that is passed three parameters: a `user` object, a `context` object, and a `callback` function.

```javascript lines
function (user, context, callback) {
     // TODO: implement your rule
     return callback(null, user, context);
    }
```






**Do not** add a trailing semicolon at the end of the function declaration as this will break rule execution.
Anonymous functions make it hard to interpret the call-stack generated as a result of any exceptional error condition. For convenience, use compact and unique naming conventions to assist with diagnostic analysis (e.g., `function MyRule1 (user, context, callback) {...}`). To learn more, read [Error Handling Best Practices](/docs/troubleshoot/error-handling-best-practices).

Rules execute in the pipeline associated with the generation of artifacts for authenticity that forms part of the overall Auth0 engine. When a pipeline is executed, all enabled rules are packaged together in the order in which they are listed and sent as one code blob to be executed as an Auth0 serverless Webtask. To see the entire Auth0 engine, download [Inside the Auth0 Engine](https://cdn.auth0.com/blog/auth0-raises-100m-to-fuel-the-growth/inside-the-auth0-engine-high-res.jpg).

<Frame>![Rule Anatomy Best Practices Rules Pipeline Diagram](/images/cdy7uua7fh8z/1IdyXP3cxbukXrMYuCk3VG/ac5a8d8bc8b595b79ae544c7bcc0468b/rules-best-practice-pipeline.png)</Frame>

## Size

We recommend that the total size of implementation for all enabled rules should not exceed 100 kB. The larger the size, the more latency is introduced due to the packaging and transport process employed by the Auth0 serverless Webtask platform, and this will have an impact on the performance of your system. Note that the 100 kB limit does not include any `npm` modules that may be referenced as part of any `require` statements.

## Order

The order in which rules are displayed in the <Tooltip tip="Auth0 Dashboard: Auth0's main product to configure your services." cta="View Glossary" href="/docs/glossary?term=Auth0+Dashboard">Auth0 Dashboard</Tooltip> dictates the order in which the rules will be executed. This is important because one rule may make one or more definitions within the environment associated with execution that another rule may depend upon. In this case, the rule making the definition(s) should execute before the rule that makes use of it. To learn more, read [Rules Environment Best Practices](/docs/rules-best-practices/rules-environment-best-practices).

Run expensive rules that call APIs (including the Auth0 <Tooltip tip="Management API: A product to allow customers to perform administrative tasks." cta="View Glossary" href="/docs/glossary?term=Management+API">Management API</Tooltip>) as late as possible. If you have other, less expensive rules that could cause an `unauthorized` access determination, then you should run these first.

## Learn more

* [Rules Environment Best Practices](/docs/rules-best-practices/rules-environment-best-practices)
* [Rules Execution Best Practices](/docs/rules-best-practices/rules-execution-best-practices)
* [Rules Security Best Practices](/docs/rules-best-practices/rules-security-best-practices)
* [Rules Testing Best Practices](/docs/rules-best-practices/rules-testing-best-practices)