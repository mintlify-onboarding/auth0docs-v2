---
description: Describes how to configure Cisco Duo Security for MFA.
'og:image': https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
'og:title': Configure Cisco Duo Security for MFA
'og:url': https://auth0.com/docs/
permalink: configure-cisco-duo-for-mfa
title: Configure Cisco Duo Security for MFA
'twitter:description': Describes how to configure Cisco Duo Security for MFA.
'twitter:title': Configure Cisco Duo Security for MFA
---
import {AuthCodeBlock} from "/snippets/AuthCodeBlock.jsx";

<Card title="Before you start">

* Configure your Duo account. For more information, read [Getting Started on Duo Docs](https://duo.com/docs/getting-started#getting-started).
* Create a [Duo Security Web SDK integration](https://duo.com/docs/duoweb) and record the **Integration Key**, **Secret Key,** and **API hostname** credentials.

</Card>

Cisco Duo is a multi-faceted authentication provider and can only be used on your Auth0 tenant if all other factors are disabled. Your Duo account can support push notifications, SMS, OTP, phone callback, and more based on your configuration.

You cannot also enable Duo if other factors are enabled. Duo is only available to users when it is the sole factor enabled.

The application will prompt the user for the second factor with Duo, listing the options you have enabled in your Duo account.

Your users can download Duo from [Google Play](https://play.google.com/store/apps/details?id=com.duosecurity.duomobile) or the [App Store](https://itunes.apple.com/us/app/duo-mobile/id422663827?mt=8) for use as a second factor.

## Configure Duo

To configure Duo Security, you must pass your Duo credentials to your application in the <Tooltip tip="Auth0 Dashboard: Auth0's main product to configure your services." cta="View Glossary" href="/docs/glossary?term=Auth0+Dashboard">Auth0 Dashboard</Tooltip>.

1. Go to [Dashboard > Security > Multi-factor Auth > Duo Security](https://manage.auth0.com/#/security/mfa/duo) and enable it.
2. Enter the information in the fields to link your Duo account to Auth0.
3. Select **Save**.

## Use Actions to enable Duo

To enable Duo within an Action, pass `duo` as the `provider` parameter when you enable <Tooltip tip="Multi-factor authentication (MFA): User authentication process that uses a factor in addition to username and password such as a code via SMS." cta="View Glossary" href="/docs/glossary?term=multi-factor+authentication">multi-factor authentication</Tooltip>.

```js lines
exports.onExecutePostLogin = async (event, api) => {
  api.multifactor.enable('duo', { allowRememberBrowser: false });
};
```






Duo does not provide an option for "Remember Me" behavior. The 30-day MFA session is hard-coded to remember the user after the initial login.

To force your users to log in with Duo every time, create a rule with `allowRememberBrowser: false`.

## Actions template for Duo

This template provides an example and starting point to trigger multi-factor authentication with [Duo Security](http://duosecurity.com/) when a condition is met.

Upon first login, the user can enroll the device.

<Callout icon="file-lines" color="#0EA5E9" iconType="regular">

You need to create two integrations in Duo Security: one of type **Web SDK** and one of type **Admin SDK**.

</Callout>

{/* codeblockOld.header.login.logInButton codeblockOld.header.login.configureSnippet */}


export const codeExample = `exports.onExecutePostLogin = async (event, api) => {

	const CLIENTS_WITH_MFA = ['{yourClientId}'];
	// run only for the specified clients
	if (CLIENTS_WITH_MFA.includes(event.client.client_id)) {

		// uncomment the following if clause in case you want to request a second factor only from user's that have user_metadata.use_mfa === true
		//if (event.user.user_metadata && event.user.user_metadata.use_mfa){

		// optional, defaults to true. Set to false to force DuoSecurity every time.
		// See https://auth0.com/docs/multifactor-authentication/custom#change-the-frequency-of-authentication-requests for details
		api.multifactor.enable('duo', {
			providerOptions.ikey: configuration.DUO_IKEY,
			providerOptions.skey: configuration.DUO_SKEY,
			providerOptions.host: configuration.DUO_HOST,
			allowRememberBrowser: false
		})

		// optional. Use some attribute of the profile as the username in DuoSecurity. This is also useful if you already have your users enrolled in Duo.
		// username: event.user.nickname
	};
	// }

};`;

<AuthCodeBlock children={codeExample} language="js" />






## Current limitations

* You cannot use [Auth0 MFA Enrollment Tickets](/docs/secure/multi-factor-authentication/multi-factor-authentication-developer-resources/create-custom-enrollment-tickets) to enroll users with Duo. Onboard those users from Duo itself.
* If you use <Tooltip tip="Universal Login: Your application redirects to Universal Login, hosted on Auth0's Authorization Server, to verify a user's identity." cta="View Glossary" href="/docs/glossary?term=Universal+Login">Universal Login</Tooltip>, you must enable Duo in an Action with `provider` set to `duo` as described previously. You can conditionally use Duo or the built-in Auth0 provider for specific applications.

## Learn more

* [Troubleshoot Multi-Factor Authentication Issues](/docs/troubleshoot/authentication-issues/troubleshoot-mfa-issues)