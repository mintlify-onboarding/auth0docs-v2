---

mode: wide
description: This tutorial demonstrates how to add authorization to a Go API.
'og:image': https://cdn2.auth0.com/docs/1.14553.0/img/share-image.png
'og:title': 'Auth0 Go API SDK Quickstarts: Add Authorization to Your Go Application'
'og:url': https://auth0.com/docs/
sidebarTitle: Go API
title: Add Authorization to Your Go Application
'twitter:description': This tutorial demonstrates how to add authorization to a Go
  API.
'twitter:title': 'Auth0 Go API SDK Quickstarts: Add Authorization to Your Go Application'
---
import { Recipe, Content, Section, SideMenu, SideMenuSectionItem, SignUpForm } from "/snippets/recipe.jsx";
import { LoggedInForm } from "/snippets/Login.jsx";
import Jwt from "/snippets/quickstart/backend/golang/jwt.go.mdx";
import Main from "/snippets/quickstart/backend/golang/main.go.mdx";

export const sections = [
  { id: "define-permissions", title: "Define permissions" },
  { id: "install-dependencies", title: "Install dependencies" },
  { id: "configure-your-application", title: "Configure your application" },
  { id: "create-a-middleware-to-validate-access-tokens", title: "Create a middleware to validate access tokens" },
  { id: "protect-api-endpoints", title: "Protect API endpoints" }
]

<Recipe>
  <Content>
    This guide demonstrates how to integrate Auth0 with any new or existing Go API application using the [go-jwt-middleware](https://github.com/auth0/go-jwt-middleware)
        package.

    If you have not created an API in your Auth0 dashboard yet, use the interactive selector to create a new Auth0 API
        or select an existing API for your project.

    To set up your first API through the Auth0 dashboard, review our getting started guide.

    Each Auth0 API uses the API Identifier, which your application needs to validate the access token.

    <Info>
    **New to Auth0?** Learn how Auth0 works and
                  read about implementing API authentication and
                    authorization using the OAuth 2.0 framework.
    </Info>

    <Section id={sections[0].id} title={sections[0].title} stepNumber="1">
      Permissions let you define how resources can be accessed on behalf of the user with a given access token. For
            example, you might choose to grant read access to the `messages` resource if users have the manager
            access level, and a write access to that resource if they have the administrator access level.

      You can define allowed permissions in the **Permissions** view of the Auth0 Dashboard's [APIs](https://manage.auth0.com/#/apis) section. The following
            example uses the `read:messages` scope.

      <Frame>
        <img src="/images/cdy7uua7fh8z/1s3Yp5zqJiKiSWqbPSezNO/e61793a2822d095666002c3f65c71ac2/configure-permissions.png" />
      </Frame>
    </Section>

    <Section id={sections[1].id} title={sections[1].title} stepNumber="2">
      Add a `go.mod` file to list all the necessary dependencies.

      ```mod lines
      // go.mod
      module 01-Authorization-RS256
      go 1.21
      require (
      github.com/auth0/go-jwt-middleware/v2 v2.2.0

      github.com/joho/godotenv v1.5.1

      )
      ```


      Download dependencies by running the following shell command:

      ```bash lines
      go mod download
      ```

    </Section>

    <Section id={sections[2].id} title={sections[2].title} stepNumber="3">
      Create a `.env` file within the root of your project directory to store the app configuration. Then,
            fill in the environment variables:

      To configure this snippet

      ```env lines
      # The URL of our Auth0 Tenant Domain.
      If you're using a Custom Domain, be sure to set this to that value instead.
      AUTH0_DOMAIN='dev-gja8kxz4ndtex3rq.us.auth0.com'
      Our Auth0 API's Identifier.
      AUTH0_AUDIENCE='{yourApiIdentifier}'
      ```

    </Section>

    <Section id={sections[3].id} title={sections[3].title} stepNumber="4">
      The `EnsureValidToken` middleware function validates the access token. You can apply this function to
            any endpoints you wish to protect. If the token is valid, the endpoint releases the resources. If the token is not
            valid, the API returns a `401 Authorization` error.

      Set up the **go-jwt-middleware** middleware to verify access tokens from incoming requests.

      By default, your API will be set up to use RS256 as the algorithm for signing tokens. Since RS256 works by using
            a private/public keypair, tokens can be verified against the public key for your Auth0 account. This public key is
            accessible at `https://dev-gja8kxz4ndtex3rq.us.auth0.com/.well-known/jwks.json`.

      Include a mechanism to check that the token has sufficient **scope** to access the requested resources.

      Create a function `HasScope` to check and ensure the access token has the correct scope before
            returning a successful response.
    </Section>

    <Section id={sections[4].id} title={sections[4].title} stepNumber="5">
      In this example, create an `/api/public` endpoint that does not use the `EnsureToken`
            middleware as it is accessible to non-authenticated requests.

      Create an `/api/private` endpoint that requires the `EnsureToken` middleware as it is only
            available to authenticated requests containing an access token with no additional scope.

      Create an `/api/private-scoped` endpoint that requires the `EnsureToken` middleware and
            `HasScope` as it is only available for authenticated requests containing an access token with the
            `read:messages` scope granted.

      <Info>
      Only the `read:messages` scope is checked by the `HasScope` function. You may
                      want to extend it or make it a standalone middleware that accepts multiple scopes to fit your use case.
      </Info>

      ### Make a Call to Your API

      To make calls to your API, you need an Access Token. You can get an Access Token for testing purposes from the
            **Test** view in your [API
              settings](https://manage.auth0.com/#/apis).

      <Frame>
        <img src="/images/cdy7uua7fh8z/6jeVBuypOGX5qMRXeJn5ow/5e79037f6c852d2043789d622bdb9562/Quickstart_Example_App_-_English.png" />
      </Frame>

      Provide the Access Token as an `Authorization` header in your requests.

      <CodeGroup>
      ```bash cURL lines
      curl --request get \
      --url 'http:///%7ByourDomain%7D/api_path' \
      --header 'authorization: Bearer YOUR_ACCESS_TOKEN_HERE'
      ```

      ```csharp C# lines
      var client = new RestClient("http:///%7ByourDomain%7D/api_path");
      var request = new RestRequest(Method.GET);
      request.AddHeader("authorization", "Bearer YOUR_ACCESS_TOKEN_HERE");
      IRestResponse response = client.Execute(request);
      ```

      ```go Go lines
      package main
      import (
      "fmt"
      "net/http"
      "io/ioutil"
      )
      func main() {
      url := "http:///%7ByourDomain%7D/api_path"
      req, _ := http.NewRequest("get", url, nil)
      req.Header.Add("authorization", "Bearer YOUR_ACCESS_TOKEN_HERE")
      res, _ := http.DefaultClient.Do(req)
      defer res.Body.Close()
      body, _ := ioutil.ReadAll(res.Body)
      fmt.Println(res)
      fmt.Println(string(body))
      }
      ```

      ```java Java lines
      HttpResponse<String> response = Unirest.get("http:///%7ByourDomain%7D/api_path")
      .header("authorization", "Bearer YOUR_ACCESS_TOKEN_HERE")
      .asString();
      ```

      ```javascript Node.JS lines
      var axios = require("axios").default;
      var options = {
      method: 'get',
      url: 'http:///%7ByourDomain%7D/api_path',
      headers: {authorization: 'Bearer YOUR_ACCESS_TOKEN_HERE'}
      };
      axios.request(options).then(function (response) {
      console.log(response.data);
      }).catch(function (error) {
      console.error(error);
      });
      ```

      ```obj-c Obj-C lines
      #import <Foundation/Foundation.h>
      NSDictionary *headers = @{ @"authorization": @"Bearer YOUR_ACCESS_TOKEN_HERE" };
      NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http:///%7ByourDomain%7D/api_path"]
                                                        cachePolicy:NSURLRequestUseProtocolCachePolicy

                                                    timeoutInterval:10.0];

      [request setHTTPMethod:@"get"];
      [request setAllHTTPHeaderFields:headers];
      NSURLSession *session = [NSURLSession sharedSession];
      NSURLSessionDataTask *dataTask = [session dataTaskWithRequest:request
                                              completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) {

                                                  if (error) {

                                                      NSLog(@&quot;%@&quot;, error);

                                                  } else {

                                                      NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *) response;

                                                      NSLog(@&quot;%@&quot;, httpResponse);

                                                  }

                                              }];

      [dataTask resume];
      ```

      ```php PHP lines
      #import <Foundation/Foundation.h>
      NSDictionary *headers = @{ @"authorization": @"Bearer YOUR_ACCESS_TOKEN_HERE" };
      NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http:///%7ByourDomain%7D/api_path"]
                                                        cachePolicy:NSURLRequestUseProtocolCachePolicy

                                                    timeoutInterval:10.0];

      [request setHTTPMethod:@"get"];
      [request setAllHTTPHeaderFields:headers];
      NSURLSession *session = [NSURLSession sharedSession];
      NSURLSessionDataTask *dataTask = [session dataTaskWithRequest:request
                                              completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) {

                                                  if (error) {

                                                      NSLog(@&quot;%@&quot;, error);

                                                  } else {

                                                      NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *) response;

                                                      NSLog(@&quot;%@&quot;, httpResponse);

                                                  }

                                              }];

      [dataTask resume];
      ```

      ```python Python lines
      import http.client
      conn = http.client.HTTPConnection("")
      headers = { 'authorization': "Bearer YOUR_ACCESS_TOKEN_HERE" }
      conn.request("get", "/dev-gja8kxz4ndtex3rq.us.auth0.com/api_path", headers=headers)
      res = conn.getresponse()
      data = res.read()
      print(data.decode("utf-8"))
      ```

      ```ruby Ruby lines
      require 'uri'
      require 'net/http'
      url = URI("http:///%7ByourDomain%7D/api_path")
      http = Net::HTTP.new(url.host, url.port)
      request = Net::HTTP::Get.new(url)
      request["authorization"] = 'Bearer YOUR_ACCESS_TOKEN_HERE'
      response = http.request(request)
      puts response.read_body
      ```

      ```swift Swift lines
      import Foundation
      let headers = ["authorization": "Bearer YOUR_ACCESS_TOKEN_HERE"]
      let request = NSMutableURLRequest(url: NSURL(string: "http:///%7ByourDomain%7D/api_path")! as URL,
                                          cachePolicy: .useProtocolCachePolicy,

                                      timeoutInterval: 10.0)

      request.httpMethod = "get"
      request.allHTTPHeaderFields = headers
      let session = URLSession.shared
      let dataTask = session.dataTask(with: request as URLRequest, completionHandler: { (data, response, error) -> Void in
      if (error != nil) {
      print(error)

      } else {
      let httpResponse = response as? HTTPURLResponse

      print(httpResponse)

      }
      })
      dataTask.resume()
      ```
      </CodeGroup>

      <Note>
      ##### Checkpoint

      Now that you have configured your application, run your application and verify that:

      - `GET /api/public`is available for non-authenticated requests.
      - `GET /api/private`is available for authenticated requests.
      - `GET /api/private-scoped`is available for authenticated requests containing an access
                        token with the `read:messages`scope.
      </Note>
    </Section>

    ## Next Steps

    Excellent work! If you made it this far, you should now have login, logout, and user profile information running in your application.

    This concludes our quickstart tutorial, but there is so much more to explore. To learn more about what you can do with Auth0, check out:

    *   [Auth0 Dashboard](https://manage.auth0.com/dashboard/us/dev-gja8kxz4ndtex3rq) - Learn how to configure and manage your Auth0 tenant and applications
    *   [go-jwt-middleware SDK](https://github.com/auth0/go-jwt-middleware) - Explore the SDK used in this tutorial more fully
    *   [Auth0 Marketplace](https://marketplace.auth0.com/) - Discover integrations you can enable to extend Auth0â€™s functionality
  </Content>

  <SideMenu sections={sections}>
    <SideMenuSectionItem id={sections[0].id}>
      <SignUpForm />
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[1].id}>
      <SignUpForm />
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[2].id}>
      <SignUpForm />
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[3].id}>
    <CodeGroup>
      <Jwt />
      <Main />
    </CodeGroup>
    </SideMenuSectionItem>

    <SideMenuSectionItem id={sections[4].id}>
      <CodeGroup>
      <Main />
      <Jwt />
    </CodeGroup>
    </SideMenuSectionItem>

  </SideMenu>
</Recipe>
